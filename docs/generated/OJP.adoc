= OJP - **O**pen API for distributed **J**ourney **P**lanning
:toc:
:homepage: https://github.com/VDVde/OJP
// Disable last updated text.
:!last-update-label:

== OJP.xsd - OJP messages as extension of SIRI

=== The toplevel element `OJP`


[cols="1,1,1,20,20,30"]
|===
4+|`OJP`
2+|Root element for OJP messages based on SIRI message exchange protocol.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`OJPRequest`
| *1:1* |  | 

||
1+| →`OJPResponse`
| *1:1* |  | 

|
2+| →`Extensions`
| 0:1 |  | 


|===

=== The toplevel element `OJPRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPRequest`
| _→OJPRequestStructure_ |OJP Request - Groups individual functional requests.


|===


=== The complex type `OJPRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPRequestStructure`
2+| Type for OJP Request - Groups individual functional requests.

|
2+| →`RequestGroup`
| *1:1* |  | 

|===

=== The toplevel element `OJPResponse`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPResponse`
| _→OJPResponseStructure_ |OJP Request - Groups individual functional responses.


|===


=== The complex type `OJPResponseStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPResponseStructure`
2+| Type for OJP Response - Groups individual functional responses.

|
2+| →`ResponseGroup`
| *1:1* |  | 

|===

== OJP/OJP_Requests.xsd - OJP service requests and responses

=== The toplevel element `OJPFareRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPFareRequest`
| _→OJPFareRequestStructure_ |


|===


=== The complex type `OJPFareRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPFareRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPFareDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPFareDelivery`
| _→OJPFareDeliveryStructure_ |


|===


=== The complex type `OJPFareDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPFareDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`FareResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPPlaceInformationRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPPlaceInformationRequest`
| _→OJPPlaceInformationRequestStructure_ |


|===


=== The complex type `OJPPlaceInformationRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPPlaceInformationRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`PlaceInformationRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPPlaceInformationDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPPlaceInformationDelivery`
| _→OJPPlaceInformationDeliveryStructure_ |


|===


=== The complex type `OJPPlaceInformationDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPPlaceInformationDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPPlaceInformationRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`PlaceInformationResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPExchangePointsRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPExchangePointsRequest`
| _→OJPExchangePointsRequestStructure_ |


|===


=== The complex type `OJPExchangePointsRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPExchangePointsRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`ExchangePointsRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPExchangePointsDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPExchangePointsDelivery`
| _→OJPExchangePointsDeliveryStructure_ |


|===


=== The complex type `OJPExchangePointsDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPExchangePointsDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPExchangePointsRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`ExchangePointsResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPStopEventRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPStopEventRequest`
| _→OJPStopEventRequestStructure_ |


|===


=== The complex type `OJPStopEventRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPStopEventRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopEventRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPStopEventDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPStopEventDelivery`
| _→OJPStopEventDeliveryStructure_ |


|===


=== The complex type `OJPStopEventDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPStopEventDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPStopEventRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`StopEventResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPTripInfoRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPTripInfoRequest`
| _→OJPTripInfoRequestStructure_ |


|===


=== The complex type `OJPTripInfoRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPTripInfoRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TripInfoRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPTripInfoDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPTripInfoDelivery`
| _→OJPTripInfoDeliveryStructure_ |


|===


=== The complex type `OJPTripInfoDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPTripInfoDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPTripInfoRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`TripInfoResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPTripRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPTripRequest`
| _→OJPTripRequestStructure_ |


|===


=== The complex type `OJPTripRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPTripRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TripRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPTripDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPTripDelivery`
| _→OJPTripDeliveryStructure_ |


|===


=== The complex type `OJPTripDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPTripDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPTripRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`TripResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPMultiPointTripRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPMultiPointTripRequest`
| _→OJPMultiPointTripRequestStructure_ |


|===


=== The complex type `OJPMultiPointTripRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPMultiPointTripRequestStructure`
| _←AbstractOJPServiceRequestStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`MultiPointTripRequestGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

=== The toplevel element `OJPMultiPointTripDelivery`


[cols="1,1,1,20,20,30"]
|===
4+|`OJPMultiPointTripDelivery`
| _→OJPMultiPointTripDeliveryStructure_ |


|===


=== The complex type `OJPMultiPointTripDeliveryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OJPMultiPointTripDeliveryStructure`
| _←siri:AbstractServiceDeliveryStructure_ | 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OJPMultiPointTripRequest`
| 0:1 |  | 

|
2+| →`ServiceResponseContextGroup`
| *1:1* |  | 

|
2+| →`MultiPointTripResponseGroup`
| *1:1* |  | 

|
2+| →`siri:Extensions`
| 0:1 |  | 

|===

== OJP/OJP_RequestSupport.xsd - Supporting definitions for OJP service requests and their responses

=== Simple type definitions

|===
| `CalcTimeType`| _xs:integer_ | Type definition for calculation time in milliseconds.
| `CertificateIdType`| _xs:NMTOKEN_ | Type definition for the form of identification that can be used as a Message Integrity Property (public key cryptography)
| `SignatureType`| _xs:string_ | data for transmission of message signatures (public key cryptography), used to prove Message Integrity
|===
=== The `MessageIntegrityPropertiesGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `MessageIntegrityPropertiesGroup`
2+| Properties that allow checks for message integrity.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Signature`
| 0:1 | _SignatureType_ | Authorisation signature (data for transmission of message signatures (public key cryptography), used to prove Message Integrity).

|
2+| `CertificateId`
| 0:1 | _CertificateIdType_ | form of identification that can be used as a Message Integrity Property (public key cryptography)

|===

=== The `ServiceRequestContextGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceRequestContextGroup`
2+| Generic context for all request messages.

6+| The element contains a _sequence_ of the following elements:

|
2+| `DataFrameRef`
| 0:1 | _siri:DataFrameRefStructure_ | identifier of the set of data being used by an information system, which allows a comparison to be made with the versions of data being used by overlapping systems. 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

=== The `ServiceResponseContextGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceResponseContextGroup`
2+| Generic context for all response messages.

6+| The element contains a _sequence_ of the following elements:

|
2+| `DataFrameRef`
| 0:1 | _siri:DataFrameRefStructure_ | identifier of the set of data being used by an information system, which allows a comparison to be made with the versions of data being used by overlapping systems. 

|
2+| `CalcTime`
| 0:1 | _CalcTimeType_ | Calculation time.

|===

=== The `SubscriptionRequestContextGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `SubscriptionRequestContextGroup`
2+| Generic context for all subscription requests.

6+| The element contains a _sequence_ of the following elements:

|
2+| `DataFrameRef`
| 0:1 | _siri:DataFrameRefStructure_ | identifier of the set of data being used by an information system, which allows a comparison to be made with the versions of data being used by overlapping systems. 

|
2+| `Language`
| 0:* | _xs:language_ | Preferred language in which to return  text  values.

|
2+| →`MessageIntegrityPropertiesGroup`
| *1:1* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `AbstractOJPServiceRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `AbstractOJPServiceRequestStructure`
| _←siri:AbstractFunctionalServiceRequestStructure_ | Basic request structure common for all OJP service requests.


3+| →`ServiceRequestContextGroup`
| *1:1* |  | 

|===


=== The complex type `AbstractOJPSubscriptionRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `AbstractOJPSubscriptionRequestStructure`
| _←siri:AbstractSubscriptionRequestStructure_ | Basic structure common for all OJP subscription requests.


3+| →`SubscriptionRequestContextGroup`
| *1:1* |  | 

|===

=== The `DeliveryRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `DeliveryRequestGroup`
2+| Wrapper for SIRI delivery request group.



The element contains only one element:

|
2+| →`siri:DeliveryRequestGroup`
| *1:1* |  | 

|===

=== The `StatusRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StatusRequestGroup`
2+| Wrapper for SIRI status request group.



The element contains only one element:

|
2+| →`siri:StatusRequestGroup`
| *1:1* |  | 

|===

=== The toplevel element `TerminateSubscriptionRequest`


[cols="1,1,1,20,20,30"]
|===
4+|`TerminateSubscriptionRequest`
| _→siri:TerminateSubscriptionRequestStructure_ |Request element for terminating subscriptions (from SIRI).


|===

=== The `ServiceResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceResponseGroup`
2+| Wrapper for SIRI service response group.



The element contains only one element:

|
2+| →`siri:ServiceResponseGroup`
| *1:1* |  | 

|===


=== The complex type `ResponseContextStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ResponseContextStructure`
2+| Structure providing response contexts related to journeys, containing collections of places and situations.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Places`
| 0:1 |  | Container for place objects. Only place objects that are referenced in the response should be put into the container.

The element contains only one element:

|||
0+| `Place`
| *1:** | _PlaceStructure_ | 



|
2+| `Situations`
| 0:1 | _SituationsStructure_ | Container for SIRI SX situation objects. Only situations that are referenced in the response should be put into the container.

|===

== OJP/OJP_Places.xsd - Request and response definitions for place information

=== Simple type definitions

|===
| `PlaceTypeEnumeration`| _xs:string_ | 
| `PlaceUsageEnumeration`| _xs:string_ | 
|===
=== The `PlaceInformationRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceInformationRequestGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
5+|A place information request either consists of an initial request for places (by name and/or coordinates, with restrictions), or of an follow up request in which a place object is further refined.
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `InitialInput`
| *1:1* | _InitialPlaceInputStructure_ | Initial input for the place information request. This input defines what is originally looked for.

||
1+| `PlaceRef`
| *1:1* | _PlaceRefStructure_ | Place for further refinement. If a place in a previous response was marked as not "complete" it can be refined by putting it here.

|
2+| `Restrictions`
| 0:1 | _PlaceParamStructure_ | E.g. place types (stops, addresses, POIs) or specific place attributes

|===

=== The `PlaceInformationResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceInformationResponseGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `PlaceInformationResponseContext`
| 0:1 | _ResponseContextStructure_ | Context to hold response objects that occur frequently.

|
2+| `ContinueAt`
| 0:1 | _xs:nonNegativeInteger_ | If the response returns less results than expected, the value of skip can be used in a follow-up request to get further results. It tells the server to skip the given number of results in its response.

|
2+| `PlaceResult`
| 0:* | _PlaceResultStructure_ | 

|===


=== The complex type `InitialPlaceInputStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `InitialPlaceInputStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Name`
| 0:1 | _xs:string_ | Name of the place object which is looked after. This is usually the user's input. If not given, the name of the resulting place objects is not relevant.

|
2+| `GeoPosition`
| 0:1 | _siri:LocationStructure_ | Coordinate where to look for places. If given, the result should prefer place objects near to this GeoPosition.

|
2+| `GeoRestriction`
| 0:1 | _GeoRestrictionsStructure_ | Restricts the resulting place objects to the given geographical area.

|
2+| `AllowedSystemId`
| 0:* | _xs:normalizedString_ | Used in distributed environments. e.g. EU-Spirit. If none is given, the place information request refers to all known systems (in EU-Spirit "passive servers"). If at least one is given, the place information request refers only to the given systems (in EU-Spirit "passive servers"). In EU-Spirit the system IDs were previously called "provider code". See https://eu-spirit.eu/

|===


=== The complex type `PlaceParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceParamStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`PlaceDataFilterGroup`
| *1:1* |  | 

|
2+| →`PlacePolicyGroup`
| *1:1* |  | 

|===


=== The complex type `GeoRestrictionsStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `GeoRestrictionsStructure`
2+| 


6+|

6+|The element contains _one of_ the following elements:

|
2+| `Area`
| *1:1* | _GeoAreaStructure_ | Area is defined by a polyline

|
2+| `Circle`
| *1:1* | _GeoCircleStructure_ | 

|
2+| `Rectangle`
| *1:1* | _GeoRectangleStructure_ | 

|===


=== The complex type `GeoCircleStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `GeoCircleStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Center`
| *1:1* | _siri:LocationStructure_ | 

|
2+| `Radius`
| *1:1* | _siri:DistanceType_ | Radius in metres.

|===


=== The complex type `GeoRectangleStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `GeoRectangleStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `UpperLeft`
| *1:1* | _siri:LocationStructure_ | 

|
2+| `LowerRight`
| *1:1* | _siri:LocationStructure_ | 

|===


=== The complex type `GeoAreaStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `GeoAreaStructure`
2+|  [specialisation of ZONE in TMv6] a LINK SEQUENCE (one-dimensional) forming the boundary of a ZONE
	

|
2+| `PolylinePoint`
| 3:* | _siri:LocationStructure_ | 

|===


=== The complex type `PlaceResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceResultStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Place`
| *1:1* | _PlaceStructure_ | 

|
2+| `Complete`
| *1:1* | _xs:boolean_ | States whether the included place is complete or needs further refinement. Only complete places are fully resolved and can be used in e.g. trip requests. Incomplete places have to be refined entering them once again into a PlaceInformationRequest.

|
2+| `Probability`
| 0:1 | _xs:float_ | Probability, that this result is the one meant by the user's input. Value should be between 0 and 1.

|
2+| `Mode`
| 0:* | _ModeStructure_ | List of transport modes that call at this place object. This list should only be filled in case of stop points or stop places – and only when explicitly requested.

|===

=== The `PlacePolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `PlacePolicyGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Language`
| 0:* | _xs:language_ | Preferred language in which to return text values.

|
2+| `NumberOfResults`
| 0:1 | _xs:positiveInteger_ | Maximum number of results to be returned. The service is allowed to return fewer objects if reasonable or otherwise appropriate. If the number of matching objects is expected to be large (eg: in the case that all objects should be delivered) this parameter can be used to partition the response delivery into smaller chunks. The place information service is expected to support a response volume of at least 500 objects within one single response.

|
2+| `ContinueAt`
| 0:1 | _xs:nonNegativeInteger_ | Tells the server to skip the mentioned number of results in its response. Can be used in a follow-up request to get further results. The value is usually taken from the previous response.

|
2+| `IncludePtModes`
| 0:1 | _xs:boolean_ | Tells the service to include the available public transport modes at returned stops.

|===

=== The `PlaceDataFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceDataFilterGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Type`
| 0:* | _PlaceTypeEnumeration_ | Allowed place object types. If none is given, all types are allowed.

|
2+| `Usage`
| 0:1 | _PlaceUsageEnumeration_ | Defines, whether place objects for origin, via, or destination are searched.

|
2+| `PtModes`
| 0:1 | _PtModeFilterStructure_ | Allowed public transport modes. Defines, which public transport modes must be available at the returned place objects. Applies only to stops.

|
2+| `OperatorFilter`
| 0:1 | _OperatorFilterStructure_ | Filter for places that are operated by certain organisations.

|
2+| `TopographicPlaceRef`
| 0:* | _TopographicPlaceRefStructure_ | If at least one is set, only place objects within the given localities are allowed.

|
2+| `PointOfInterestFilter`
| 0:1 | _PointOfInterestFilterStructure_ | Filter to narrow down POI searches.

|===

=== The `ExchangePointsRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsRequestGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `PlaceRef`
| 0:1 | _PlaceRefStructure_ | Place for which exchange points to other "neighbour" systems are to be searched. This place is usually the origin/destination of a passenger journey. May be omitted if all exchange points shall be returned.

|
2+| `Params`
| 0:1 | _ExchangePointsParamStructure_ | E.g. place types (stops, addresses, POIs) or specific place attributes

|===


=== The complex type `ExchangePointsParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsParamStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`ExchangePointsDataFilterGroup`
| *1:1* |  | 

|
2+| →`ExchangePointsPolicyGroup`
| *1:1* |  | 

|===

=== The `ExchangePointsDataFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsDataFilterGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Type`
| 0:* | _PlaceTypeEnumeration_ | Allowed place object types. If none is given, all types are allowed.

|
2+| `Usage`
| 0:1 | _PlaceUsageEnumeration_ | Defines, whether the place object of this request acts as origin, via or destination point of the passenger journey.

|
2+| `PtModes`
| 0:1 | _PtModeFilterStructure_ | Allowed public transport modes. Defines, which public transport modes must be available at the returned place objects. Applies only to stops.

|
2+| `OperatorFilter`
| 0:1 | _OperatorFilterStructure_ | Filter for places that are operated by certain organisations.

|
2+| `TopographicPlaceRef`
| 0:* | _TopographicPlaceRefStructure_ | If at least one is set, only place objects within the given localities are allowed.

|
2+| `DestinationSystem`
| 0:1 | _siri:ParticipantRefStructure_ | Reference to system in which the destination (or origin) of the passenger is located.

|
2+| `AdjacentSystem`
| 0:* | _siri:ParticipantRefStructure_ | One or more adjacent systems to which the exchange points should be retrieved.

|===

=== The `ExchangePointsPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsPolicyGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Language`
| 0:* | _xs:language_ | Preferred language in which to return text values.

|
2+| `NumberOfResults`
| 0:1 | _xs:positiveInteger_ | 

|
2+| `ContinueAt`
| 0:1 | _xs:nonNegativeInteger_ | Tells the server to skip the mentioned number of results in its response. Can be used in a follow-up request to get further results. The value is usually taken from the previous response.

|===

=== The `ExchangePointsResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsResponseGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `ExchangePointResponseContext`
| 0:1 | _ResponseContextStructure_ | Context to hold trip response objects that occur frequently.

|
2+| `ContinueAt`
| 0:1 | _xs:nonNegativeInteger_ | If the response returns less results than expected, the value of skip can be used in a follow-up request to get further results. It tells the server to skip the given number of results in its response.

|
2+| `Place`
| 0:* | _ExchangePointsResultStructure_ | 

|===


=== The complex type `ExchangePointsResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ExchangePointsResultStructure`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `Place`
| *1:1* | _PlaceStructure_ | Place object that describes this exchange point.

|
2+| `TravelDurationEstimate`
| 0:1 | _xs:duration_ | Rough estimate of the travel duration from the specified refrence place to this exchange point.

|
2+| `WaitDuration`
| 0:1 | _xs:duration_ | Duration needed at this exchange point to change from one service to another. If a journey planning orchestrator puts together a trip at this exchange point, it has to take care, that feeding arrival and fetching departure are at least this duration apart.

|
2+| `BorderPoint`
| 0:1 | _xs:boolean_ | Flag if this exchange point is an administrative border point where timetables are cut off while services still may run through and connect the regions. At this kind of points passengers may continue their journey within the same service. Default is FALSE.

|
2+| `Mode`
| 0:* | _ModeStructure_ | List of transport modes that call at this place object. This list should only be filled in case of stop points or stop places – and only when explicitly requested.

|===

== OJP/OJP_Places.xsd - Supporting definitions for place information

=== Simple type definitions

|===
| `AddressCodeType`| _xs:normalizedString_ | Identifier of an Address
| `PointOfInterestCodeType`| _xs:normalizedString_ | Identifier of a Point of Interest
| `StopPlaceCodeType`| _xs:normalizedString_ | Identifier of a Stop Place
| `TopographicPlaceCodeType`| _xs:normalizedString_ | Identifier of a TopographicPlace
|===
=== The `StopPointGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopPointGroup`
2+| A stop point with id and name

6+| The element contains a _sequence_ of the following elements:

|
2+| →`siri:StopPointRef`
| *1:1* |  | 

|
2+| `StopPointName`
| *1:1* | _InternationalTextStructure_ | Name or description of stop point for use in passenger information.

|
2+| `NameSuffix`
| 0:1 | _InternationalTextStructure_ | Additional description of the stop point that may be appended to the name if enough space is available. F.e. "opposite main entrance".

|
2+| `PlannedQuay`
| 0:1 | _InternationalTextStructure_ | Name of the bay where to board/alight from the vehicle. According to planned timetable.

|
2+| `EstimatedQuay`
| 0:1 | _InternationalTextStructure_ | Name of the bay where to board/alight from the vehicle. As to the latest realtime status.

|===


=== The complex type `StopPointStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopPointStructure`
2+| [an extended view of SCHEDULED STOP POINT in TMv6] a SCHEDULED STOP POINT extended by ACCESSIBILITY LIMITATION attributes and with identifier and name where passengers can board or alight from vehicles 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `PrivateCode`
| 0:* | _PrivateCodeStructure_ | Code of this stop point in private/foreign/proprietary coding schemes.

|
2+| `ParentRef`
| 0:1 | _StopPlaceRefStructure_ | Reference to the stop place to which this stop point belongs.

|
2+| →`TopographicPlaceRef`
| 0:1 |  | 

|
2+| →`StopAttributesGroup`
| *1:1* |  | 

|===


=== The complex type `StopPlaceRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopPlaceRefStructure`
2+| Reference to a Stop Place

|===

=== The toplevel element `StopPlaceRef`


[cols="1,1,1,20,20,30"]
|===
4+|`StopPlaceRef`
| _→StopPlaceRefStructure_ |Reference to a Stop Place


|===

=== The `StopPlaceGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopPlaceGroup`
2+| A stop place with id and name

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPlaceRef`
| *1:1* |  | 

|
2+| `StopPlaceName`
| *1:1* | _InternationalTextStructure_ | Name of this stop place for use in passenger information.

|
2+| `NameSuffix`
| 0:1 | _InternationalTextStructure_ | Additional description of the stop place that may be appended to the name if enough space is available. F.e. "Exhibition Center".

|===


=== The complex type `StopPlaceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopPlaceStructure`
2+| [an extended view of STOP PLACE in TMv6] a PLACE extended by ACCESSIBILITY LIMITATION properties and some attributes of the associated equipment, comprising one or more locations where vehicles may stop and where passengers may board or leave vehicles or prepare their trip, and which will usually have one or more wellknown names 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPlaceGroup`
| *1:1* |  | 

|
2+| `PrivateCode`
| 0:* | _PrivateCodeStructure_ | Code of this stop place in private/foreign/proprietary coding schemes.

|
2+| →`TopographicPlaceRef`
| 0:1 |  | 

|
2+| →`StopAttributesGroup`
| *1:1* |  | 

|===

=== The `StopAttributesGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopAttributesGroup`
2+| [properties of a SCHEDULED STOP POINT or STOP PLACE in TMv6] selection of attributes of ACCESSIBIITY LIMITATION related to a SCHEDULED STOP POINT extended by attributes referring to some equipment.

6+| The element contains a _sequence_ of the following elements:

|
2+| `WheelchairAccessible`
| 0:1 | _xs:boolean_ | Whether this stop is accessible for wheelchair users.

|
2+| `Lighting`
| 0:1 | _xs:boolean_ | Whether this stop is lit.

|
2+| `Covered`
| 0:1 | _xs:boolean_ | Whether this stop offers protection from weather conditions like rain, snow, storm etc.

|===


=== The complex type `TopographicPlaceRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TopographicPlaceRefStructure`
2+| Reference to a TopographicPlace

|===

=== The toplevel element `TopographicPlaceRef`


[cols="1,1,1,20,20,30"]
|===
4+|`TopographicPlaceRef`
| _→TopographicPlaceRefStructure_ |Reference to a TopographicPlace


|===


=== The complex type `TopographicPlaceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TopographicPlaceStructure`
2+| [TMv6] A type of PLACE providing the topographical context when searching for or presenting travel information, for example as the origin or destination of a trip. It may be of any size (e.g. County,City, Town, Village) and of different specificity (e.g. Greater London, London, West End, Westminster, St James's).

6+| The element contains a _sequence_ of the following elements:

|
2+| `TopographicPlaceCode`
| *1:1* | _TopographicPlaceCodeType_ | TopographicPlace ID.

|
2+| `TopographicPlaceName`
| *1:1* | _InternationalTextStructure_ | Name or description of TopographicPlace for use in passenger information.

|
2+| `PrivateCode`
| 0:* | _PrivateCodeStructure_ | Code of this TopographicPlace in private/foreign/proprietary coding schemes.

|
2+| `ParentRef`
| 0:1 | _TopographicPlaceRefStructure_ | Reference to a parent TopographicPlace.

|
2+| `ReferredSystemId`
| 0:1 | _xs:normalizedString_ | Used in distributed environments (e.g. EU-Spirit). If set, this topographic place resides within the given system (in EU-Spirit "passive server"). This system can be queried for actual places within this topographic place. This is used in an distributed environment for a two-steps place identification. In EU-Spirit the system IDs were previously called "provider code". See https://eu-spirit.eu/

|
2+| `Area`
| 0:1 |  | Area covered by the locality described as a polygon.

The element contains only one element:

|||
0+| `Points`
| 3:* | _siri:LocationStructure_ | 



|===


=== The complex type `PointOfInterestRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PointOfInterestRefStructure`
2+| Reference to a Point of Interest

|===

=== The toplevel element `PointOfInterestRef`


[cols="1,1,1,20,20,30"]
|===
4+|`PointOfInterestRef`
| _→PointOfInterestRefStructure_ |Reference to a Point of Interest


|===


=== The complex type `PointOfInterestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PointOfInterestStructure`
2+| [corresponds to POINT OF INTEREST in TMv6 with related information] type of PLACE to or through which passengers may wish to navigate as part of their journey and which is modelled in detail by journey planners. 

6+| The element contains a _sequence_ of the following elements:

|
2+| `PointOfInterestCode`
| *1:1* | _PointOfInterestCodeType_ | ID of this Point of Interest.

|
2+| `PointOfInterestName`
| *1:1* | _InternationalTextStructure_ | Name or description of point of interest for use in passenger information.

|
2+| `NameSuffix`
| 0:1 | _InternationalTextStructure_ | Additional description of the point of interest that may be appended to the name if enough space is available. F.e. "Exhibition Center".

|
2+| `PointOfInterestCategory`
| 0:* | _PointOfInterestCategoryStructure_ | Categories this POI is associated with. Order indicates descending relevance.

|
2+| `PrivateCode`
| 0:* | _PrivateCodeStructure_ | Code of this point of interest in private/foreign/proprietary coding schemes.

|
2+| →`TopographicPlaceRef`
| 0:1 |  | 

|===


=== The complex type `PointOfInterestCategoryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PointOfInterestCategoryStructure`
2+| [a view of POINT OF INTEREST CLASSIFICATION in TMv6] categorisation of POINTs OF INTEREST in respect of the activities undertaken at them (defined by key-value-pairs).


6+|

6+|The element contains _one of_ the following elements:

|
2+| `OsmTag`
| *1:** | _OsmTagStructure_ | Open Street Map tag structure (key-value)

|
2+| `PointOfInterestClassification`
| *1:** | _xs:string_ | Classification of the POI (when it is not from OSM). The codification of the classification Id may include de codification source (for example "IGN:[classificationCode]")

|===


=== The complex type `OsmTagStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OsmTagStructure`
2+| Structure of an Open Street Map tag.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Tag`
| *1:1* | _xs:NMTOKEN_ | Name of Open Street Map tag (amenity, leisure, tourism, bike, ...)

|
2+| `Value`
| *1:1* | _xs:NMTOKEN_ | Value for Open Street Map tag (charging_station, hostel, yes, ...)

|===


=== The complex type `PointOfInterestFilterStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PointOfInterestFilterStructure`
2+| Filter POIs by category.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Exclude`
| 0:1 | _xs:boolean_ | Whether categories in list are to include or exclude from search. Default is FALSE.

|
2+| `PointOfInterestCategory`
| 0:* | _PointOfInterestCategoryStructure_ | These POI categories can be used to filter POIs. If more than one is given the filtering is by logical "OR" (when Exclude=FALSE) and logical "AND" (when Exclude=TRUE).

|===


=== The complex type `AddressRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `AddressRefStructure`
2+| Reference to an Address

|===

=== The toplevel element `AddressRef`


[cols="1,1,1,20,20,30"]
|===
4+|`AddressRef`
| _→AddressRefStructure_ |Reference to an Address


|===

=== The `AddressDetailGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `AddressDetailGroup`
2+| An address with its name entities

6+| The element contains a _sequence_ of the following elements:

|
2+| `CountryName`
| 0:1 | _xs:string_ | Country of the address.

|
2+| `PostCode`
| 0:1 | _xs:string_ | Postal code of the address.

|
2+| `TopographicPlaceName`
| 0:1 | _xs:string_ | TopographicPlace name of the address. If set it should at least contain the city name.

|
2+| →`TopographicPlaceRef`
| 0:1 |  | 

|
2+| `Street`
| 0:1 | _xs:string_ | Street name of the address.

|
2+| `HouseNumber`
| 0:1 | _xs:string_ | House number of the address. If none is given, either a crossing street can be given, or the whole street is meant.

|
2+| `CrossRoad`
| 0:1 | _xs:string_ | Crossing. This can be used to be more specific without using house numbers.

|===


=== The complex type `AddressStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `AddressStructure`
2+| descriptive data associated with a PLACE that can be used to describe the unique geographical context of a PLACE for the purposes of identifying it. May be refined as either a ROAD ADDRESS, a POSTAL ADDRESS or both

6+| The element contains a _sequence_ of the following elements:

|
2+| `AddressCode`
| *1:1* | _AddressCodeType_ | ID of this address.

|
2+| `PrivateCode`
| 0:* | _PrivateCodeStructure_ | Code of this address in private/foreign/proprietary coding schemes.

|
2+| `AddressName`
| *1:1* | _InternationalTextStructure_ | Name or description of address for use in passenger information.

|
2+| `NameSuffix`
| 0:1 | _InternationalTextStructure_ | Additional description of the address that may be appended to the name if enough space is available. F.e. "Crossing with Peterstraße".

|
2+| →`AddressDetailGroup`
| *1:1* |  | 

|===


=== The complex type `PlaceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceStructure`
2+| geographic PLACE of any type which may be specified as the origin or destination of a trip

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `Address`
| *1:1* | _AddressStructure_ | Model of an address 

||
1+| `PointOfInterest`
| *1:1* | _PointOfInterestStructure_ | Model of a POI 

||
1+| `StopPlace`
| *1:1* | _StopPlaceStructure_ | Model of a stop place

||
1+| `StopPoint`
| *1:1* | _StopPointStructure_ | Model of a stop point 

||
1+| `TopographicPlace`
| *1:1* | _TopographicPlaceStructure_ | TopographicPlace. Region, village, or city.

|
2+| `Name`
| *1:1* | _InternationalTextStructure_ | Public name of the place.

|
2+| `GeoPosition`
| *1:1* | _siri:LocationStructure_ | 

|
2+| `Attribute`
| 0:* | _GeneralAttributeStructure_ | Attribute associated with this place.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `PlaceRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceRefStructure`
2+| Reference to a geographic PLACE of any type which may be specified as the origin or destination of a trip

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`siri:StopPointRef`
| *1:1* |  | 

||
1+| →`StopPlaceRef`
| *1:1* |  | 

||
1+| →`TopographicPlaceRef`
| *1:1* |  | 

||
1+| →`PointOfInterestRef`
| *1:1* |  | 

||
1+| →`AddressRef`
| *1:1* |  | 

||
1+| `GeoPosition`
| *1:1* | _siri:LocationStructure_ | WGS84 coordinates position.

|
2+| `Name`
| *1:1* | _InternationalTextStructure_ | Public name of the place.

|===

== OJP/OJP_StopEvents.xsd - Request and response definitions for arrivals and departures of public transport services at stops

=== Simple type definitions

|===
| `HierarchyEnumeration`| _xs:NMTOKEN_ | 
			Indicates for which parts of the hierarchy of the StopPlace(s) stop events should be provided 
			(if known by the server). "local" (default) is the local server setting. "no" will include no hierarchy and only 
			provide the given StopPlace / StopPoint. "down" will include all lower StopPoints/StopPlaces in the hierarchy, if
			such a hierarchy exists. "all" does include all StopPoints/StopPlaces for the meta station, if it is known. How 
			to use this: if you indicate the reference to a train station and the parameter is set to "down", the departures/
			arrivals at the associated bus stations will show as well. If you have the ScheduledStopPoint of platform B of 
			the local bus and it is associated with 3 other stations, you will get all these arrivals/departures as well, 
			if the parameter is set to "all".
			
| `StopEventTypeEnumeration`| _xs:string_ |  Departure or arrival events or both
|===
=== The `StopEventRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventRequestGroup`
2+| Request structure for departure and arrival events at stops

6+| The element contains a _sequence_ of the following elements:

|
2+| `Place`
| *1:1* | _PlaceContextStructure_ | Place for which to obtain stop event information.

|
2+| `Params`
| 0:1 | _StopEventParamStructure_ | Request parameter

|===


=== The complex type `StopEventParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventParamStructure`
2+| Request specific parameters (parameters which define what is to be included in a Stop  Event result)

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopEventDataFilterGroup`
| *1:1* |  | 

|
2+| →`StopEventPolicyGroup`
| *1:1* |  | 

|
2+| →`StopEventContentFilterGroup`
| *1:1* |  | 

|===

=== The `StopEventDataFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventDataFilterGroup`
2+| Request data filters

6+| The element contains a _sequence_ of the following elements:

|
2+| `PtModeFilter`
| 0:1 | _PtModeFilterStructure_ | Modes to be considered in stop events.

|
2+| `LineFilter`
| 0:1 | _LineDirectionFilterStructure_ | Lines/Directions to include/exclude.

|
2+| `OperatorFilter`
| 0:1 | _OperatorFilterStructure_ | Transport operators to include/exclude.

|===

=== The `StopEventPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventPolicyGroup`
2+| Request policies

6+| The element contains a _sequence_ of the following elements:

|
2+| `NumberOfResults`
| 0:1 | _xs:positiveInteger_ | parameter to control the number of TRIP results before/after a point in time. May NOT be used when departure time at origin AND arrival time at destination are set

|
2+| `TimeWindow`
| 0:1 | _xs:duration_ | Time window events should lie within. Starting from time given in PlaceContext.

|
2+| `StopEventType`
| 0:1 | _StopEventTypeEnumeration_ | Only departures or arrivals or both.

|===

=== The `StopEventContentFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventContentFilterGroup`
2+| Content filters which data is expected in the response

6+| The element contains a _sequence_ of the following elements:

|
2+| `IncludePreviousCalls`
| 0:1 | _xs:boolean_ | Whether the previous calls of each vehicle journey should be included in the response.

|
2+| `IncludeOnwardCalls`
| 0:1 | _xs:boolean_ | Whether the onward calls of each vehicle journey should be included in the response.

|
2+| `IncludeOperatingDays`
| 0:1 | _xs:boolean_ | Whether operating day information of this stop event should be included in the response.

|
2+| `IncludeRealtimeData`
| 0:1 | _xs:boolean_ | Whether realtime information of this stop event should be included in the response.

|
2+| `IncludePlacesContext`
| 0:1 | _xs:boolean_ | Whether the place context is needed. If a requestor has that information already, the response can be made slimmer, when set to false. Default is true. 

|
2+| `IncludeSituationsContext`
| 0:1 | _xs:boolean_ | Wheter the situation context is needed. If a requestor has that information by other means or can't process it, the response can be made slimmer, when set to false. Default is true

|
2+| `IncludeStopHierarchy`
| 0:1 | _HierarchyEnumeration_ | Indicates for which parts of the hierarchy of the StopPlace(s) stop events should 
					be provided (if known by the server). "local" (default) is the local server setting. "no" will include
					no hierarchy and only provide the given StopPlace / StopPoint. "down" will include all lower StopPoints/
					StopPlaces in the hierarchy, if such a hierarchy exists. "all" does include all StopPoints/StopPlaces 
					for the meta station, if it is known. How to use this: if you indicate the reference to a train station 
					and the parameter is set to "down", the departures/arrivals at the associated bus stations will show as 
					well. If you have the ScheduledStopPoint of platform B of the local bus and it is associated with 3 other 
					stations, you will get all these arrivals/departures as well, if the parameter is set to "all".
					

|===

=== The `StopEventResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventResponseGroup`
2+| Response structure for departure and arrival events at stops

6+| The element contains a _sequence_ of the following elements:

|
2+| `StopEventResponseContext`
| 0:1 | _ResponseContextStructure_ | Container for data that is referenced multiple times.

|
2+| `StopEventResult`
| 0:* | _StopEventResultStructure_ | Enclosing element for stop event data.

|===


=== The complex type `StopEventResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventResultStructure`
2+| Wrapper element for a single stop event result.

6+| The element contains a _sequence_ of the following elements:

|
2+| `ResultId`
| *1:1* | _xs:NMTOKEN_ | ID of this result.

|
2+| `ErrorMessage`
| 0:* | _ErrorMessageStructure_ | Error messages that refer to this stop event.

|
2+| `StopEvent`
| *1:1* | _StopEventStructure_ | Stop event data element.

|===


=== The complex type `StopEventStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopEventStructure`
2+| Stop event structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `PreviousCall`
| 0:* | _CallAtNearStopStructure_ | Calls at stops that happen before this stop event (service pattern of this vehicle journey before this stop event).

|
2+| `ThisCall`
| *1:1* | _CallAtNearStopStructure_ | The call of this vehicle journey at this stop.

|
2+| `OnwardCall`
| 0:* | _CallAtNearStopStructure_ | Calls at stops that happen after this stop event (rest of the service pattern of the vehicle journey).

|
2+| `Service`
| *1:1* | _DatedJourneyStructure_ | Service that calls at this stop.

|
2+| →`OperatingDaysGroup`
| 0:1 |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `CallAtNearStopStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `CallAtNearStopStructure`
2+| indication of the walk distance and time to a nearby stop where relevant.

6+| The element contains a _sequence_ of the following elements:

|
2+| `CallAtStop`
| *1:1* | _CallAtStopStructure_ | [same as CALL in SIRI] the meeting of a VEHICLE JOURNEY with a specific SCHEDULED STOP POINT .

|
2+| `WalkDistance`
| 0:1 | _siri:DistanceType_ | Distance from request place (f.e. address) to this stop in metres.

|
2+| `WalkDuration`
| 0:1 | _xs:duration_ | Walking duration from request place (f.e. address) to this stop. All user options taken into account (f.e. walk speed).

|===

== OJP/OJP_Trips.xsd - Request and response definitions for trip requests and distributed journey planning

=== Simple type definitions

|===
| `AccessFeatureTypeEnumeration`| _xs:string_ | Allowed values for a AccessFeature.
| `GuidanceAdviceEnumeration`| _xs:string_ | various types of guidance advice given to travelle
| `MultiPointTypeEnumeration`| _xs:string_ | How the multiple origin/destination points should be considered
| `OptimisationMethodEnumeration`| _xs:string_ | the types of algorithm that can be used for planning a journey (fastest, least walking, etc).
| `TransitionEnumeration`| _xs:string_ | Transition types for interchanges.
| `TurnActionEnumeration`| _xs:string_ | the range of alternative turns that can be described
|===
=== The `TripRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripRequestGroup`
2+| Trip request structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Origin`
| *1:** | _PlaceContextStructure_ | Specifies the origin situation from where the user wants to start.

|
2+| `Destination`
| *1:** | _PlaceContextStructure_ | Specifies the destination situation where the user is heading to.

|
2+| `Via`
| 0:* | _TripViaStructure_ | Ordered series of points where the journey must pass through. If more than one via point is given all of them must be obeyed - in the correct order. The server is allowed to replace a via stop by equivalent stops.

|
2+| `NotVia`
| 0:* | _NotViaStructure_ | Not-via restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs that the TRIP is not allowed to pass through. If more than one not via point is given all of them must be obeyed.

|
2+| `NoChangeAt`
| 0:* | _NoChangeAtStructure_ | no-change-at restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs at which no TRANSFER is allowed within a TRIP.

|
2+| `Params`
| 0:1 | _TripParamStructure_ | Options to control the search behaviour and response contents.

|===


=== The complex type `TripParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripParamStructure`
2+| Trip request parameter structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TripDataFilterGroup`
| *1:1* |  | 

|
2+| →`TripMobilityFilterGroup`
| *1:1* |  | 

|
2+| →`TripPolicyGroup`
| *1:1* |  | 

|
2+| →`TripContentFilterGroup`
| *1:1* |  | 

|
2+| `FareParam`
| 0:1 | _FareParamStructure_ | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

=== The `TripDataFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripDataFilterGroup`
2+| Data to be included/excluded from search, f.e. modes, operators.

6+| The element contains a _sequence_ of the following elements:

|
2+| `PtModeFilter`
| 0:1 | _PtModeFilterStructure_ | Modes to be considered in trip calculation.

|
2+| `LineFilter`
| 0:1 | _LineDirectionFilterStructure_ | Lines/Directions to include/exclude.

|
2+| `OperatorFilter`
| 0:1 | _OperatorFilterStructure_ | Transport operators to include/exclude.

|
2+| `PrivateModeFilter`
| 0:1 | _PrivateModeFilterStructure_ | Private mobility options to include/exclude.

|===

=== The `TripPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripPolicyGroup`
2+| Policies that control the trip search behaviour.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`BaseTripPolicyGroup`
| *1:1* |  | 

|
2+| `TransferLimit`
| 0:1 | _xs:nonNegativeInteger_ | The maximum number of interchanges the user will accept per trip.

|
2+| `OptimisationMethod`
| 0:1 | _OptimisationMethodEnumeration_ | the types of algorithm that can be used for planning a journey (fastest, least walking, etc)

|
2+| `ItModesToCover`
| 0:* | _IndividualModesEnumeration_ | For each mode in this list a separate monomodal trip shall be found - in addition to inter-modal solutions.

|===

=== The `TripMobilityFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripMobilityFilterGroup`
2+| Parameters the user can set to restrict the mobility options - particularly for interchanging.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`BaseTripMobilityFilterGroup`
| *1:1* |  | 

|
2+| `LevelEntrance`
| 0:1 | _xs:boolean_ | The user needs vehicles with level entrance between  platform and vehicle, f.e. for wheelchair access.

|
2+| `BikeTransport`
| 0:1 | _xs:boolean_ | The user wants to carry a bike on public transport.

|
2+| `WalkSpeed`
| 0:1 | _OpenPercentType_ | Deviation from average walk speed in percent. 100% percent is average speed. Less than 100 % slower, Greater than 150% faster.

|
2+| `AdditionalTransferTime`
| 0:1 | _xs:duration_ | Additional time added to all transfers (also to transfers between individual to public transport).

|===

=== The `TripContentFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripContentFilterGroup`
2+| Parameters that control the level of detail of the trip results.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`BaseTripContentFilterGroup`
| *1:1* |  | 

|
2+| `IncludeIntermediateStops`
| 0:1 | _xs:boolean_ | Whether the result should include intermediate stops (between the passenger's board and alight stops).

|
2+| `IncludeFare`
| 0:1 | _xs:boolean_ | Whether the result should include fare information.

|
2+| `IncludeOperatingDays`
| 0:1 | _xs:boolean_ | Whether the result should include operating day information - as encoded bit string and in natural language.

|
2+| `TripSummaryOnly`
| 0:1 | _xs:boolean_ | If true, then the response will contain only summaries of the found trips. Default is false.

|===


=== The complex type `NotViaStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `NotViaStructure`
2+| NNot-via restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs that the TRIP is not allowed to pass through


6+|

6+|The element contains _one of_ the following elements:

|
2+| →`siri:StopPointRef`
| *1:1* |  | 

|
2+| →`StopPlaceRef`
| *1:1* |  | 

|===


=== The complex type `NoChangeAtStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `NoChangeAtStructure`
2+| no-change-at restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs at which no TRANSFER is allowed within a TRIP.


6+|

6+|The element contains _one of_ the following elements:

|
2+| →`siri:StopPointRef`
| *1:1* |  | 

|
2+| →`StopPlaceRef`
| *1:1* |  | 

|===

=== The `TripResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripResponseGroup`
2+| Trip response structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TripResponseContext`
| 0:1 | _ResponseContextStructure_ | Context to hold trip response objects that occur frequently.

|
2+| `TripResult`
| 0:* | _TripResultStructure_ | The trip results found by the server.

|===


=== The complex type `TripResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripResultStructure`
2+| Structure for a single trip result and its accompanying error messages.

6+| The element contains a _sequence_ of the following elements:

|
2+| `ResultId`
| *1:1* | _xs:NMTOKEN_ | Id of this trip result for referencing purposes. Unique within trip response.

|
2+| `ErrorMessage`
| 0:* | _ErrorMessageStructure_ | Error messages related to this trip result.

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `Trip`
| *1:1* | _TripStructure_ | Detailed information on trip.

||
1+| `TripSummary`
| *1:1* | _TripSummaryStructure_ | Summary on trip. Only if requestor set TripSummaryOnly in request.

|
2+| `TripFare`
| 0:* | _TripFareResultStructure_ | 

|===


=== The complex type `TripSummaryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripSummaryStructure`
2+| Structure for trip overview information.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TripId`
| *1:1* | _xs:NMTOKEN_ | Id of this trip for referencing purposes. Unique within trip response.

|
2+| `Origin`
| 0:1 | _PlaceRefStructure_ | Describes the origin situation of this trip.

|
2+| `Destination`
| 0:1 | _PlaceRefStructure_ | Describes the arrival situation of this trip.

|
2+| `Duration`
| 0:1 | _xs:duration_ | Overall duration of the trip.

|
2+| `StartTime`
| 0:1 | _xs:dateTime_ | Departure time at origin.

|
2+| `EndTime`
| 0:1 | _xs:dateTime_ | Arrival time at destination.

|
2+| `PTTripLegs`
| 0:1 | _xs:nonNegativeInteger_ | Number of public transport trip legs.

|
2+| `Distance`
| 0:1 | _siri:DistanceType_ | Trip distance.

|
2+| →`OperatingDaysGroup`
| 0:1 |  | 

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `TripStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripStructure`
2+| [an extended form of PT TRIP in TM and NeTEx as it also includes the initial and final access legs to and from public transport] whole journey from passenger origin to passenger destination in one or more trip LEGs 

6+| The element contains a _sequence_ of the following elements:

|
2+| `TripId`
| *1:1* | _xs:NMTOKEN_ | Id of this trip for referencing purposes. Unique within trip response.

|
2+| `Duration`
| *1:1* | _xs:duration_ | Overall duration of the trip.

|
2+| `StartTime`
| *1:1* | _xs:dateTime_ | Departure time at origin.

|
2+| `EndTime`
| *1:1* | _xs:dateTime_ | Arrival time at destination.

|
2+| `Transfers`
| *1:1* | _xs:nonNegativeInteger_ | Number of interchanges.

|
2+| `Distance`
| 0:1 | _siri:DistanceType_ | Trip distance.

|
2+| `TripLeg`
| *1:** | _TripLegStructure_ | Legs of the trip

|
2+| →`OperatingDaysGroup`
| 0:1 |  | 

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| →`TripStatusGroup`
| 0:1 |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `TripLegStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripLegStructure`
2+| a single stage of a TRIP that is made without change of MODE or service (ie: between each interchange)

6+| The element contains a _sequence_ of the following elements:

|
2+| `LegId`
| *1:1* | _xs:NMTOKEN_ | Id of this trip leg. Unique within trip result.

|
2+| `ParticipantRef`
| 0:1 | _siri:ParticipantRefStructure_ | [equivalent of PARTICIPANT in SIRI] IT system that is participating in a communication with other participant(s)

|
5+|Choice for the type of the trip leg.
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `ContinuousLeg`
| *1:1* | _ContinuousLegStructure_ | 

||
1+| `TimedLeg`
| *1:1* | _TimedLegStructure_ | 

||
1+| `TransferLeg`
| *1:1* | _TransferLegStructure_ | 

|===


=== The complex type `TimedLegStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TimedLegStructure`
2+| passenger TRIP LEG with timetabled schedule.  Corresponds to a RIDE.

6+| The element contains a _sequence_ of the following elements:

|
2+| `LegBoard`
| *1:1* | _LegBoardStructure_ | Stop/Station where boarding is done

|
2+| `LegIntermediates`
| 0:* | _LegIntermediateStructure_ | information about the intermediate passed stop points.

|
2+| `LegAlight`
| *1:1* | _LegAlightStructure_ | Stop/Station to alight

|
2+| `Service`
| *1:1* | _DatedJourneyStructure_ | Service that is used for this trip leg.

|
2+| `LegAttribute`
| 0:* | _LegAttributeStructure_ | Attributes that are not valid on the whole service, but only on parts of the journey leg.

|
2+| →`OperatingDaysGroup`
| 0:1 |  | 

|
2+| `LegTrack`
| 0:1 | _LegTrackStructure_ | Geographic embedding of this leg.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `TransferLegStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TransferLegStructure`
2+| [a specialised type of NAVIGATION PATH in TMv6] description of a LEG which links other LEGs of a TRIP where a TRANSFER between different LOCATIONs is required

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `ContinuousMode`
| *1:1* | _ContinuousModesEnumeration_ | Mode that is used for this interchange between public services.

||
1+| `TransferMode`
| *1:1* | _TransferModesEnumeration_ | Mode that is used for this interchange between public services.

|
2+| `LegStart`
| *1:1* | _PlaceRefStructure_ | Stop/Station where boarding is done

|
2+| `LegEnd`
| *1:1* | _PlaceRefStructure_ | Stop/Station to alight

|
2+| →`TimeWindowGroup`
| *1:1* |  | 

|
2+| →`TransferDurationGroup`
| *1:1* |  | 

|
2+| `LegDescription`
| 0:1 | _InternationalTextStructure_ | Text that describes this interchange.

|
2+| `Length`
| 0:1 | _LengthType_ | Length of this interchange path.

|
2+| `Attribute`
| 0:* | _GeneralAttributeStructure_ | Note or service attribute.

|
2+| `PathGuidance`
| 0:1 | _PathGuidanceStructure_ | Structured model further describing this interchange, its geographic embedding and accessibility.

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `ContinuousLegStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ContinuousLegStructure`
2+| [relates to a specific type of RIDE in TM and NeTEx] leg of a journey that is not bound to a timetable 

6+| The element contains a _sequence_ of the following elements:

|
2+| `LegStart`
| *1:1* | _PlaceRefStructure_ | Stop/Station where boarding is done

|
2+| `LegEnd`
| *1:1* | _PlaceRefStructure_ | Stop/Station to alight

|
2+| `Service`
| *1:1* | _ContinuousServiceStructure_ | Service of this leg. May be "walk" in most cases, but also cycling or taxi etc.

|
2+| →`TimeWindowGroup`
| *1:1* |  | 

|
2+| `Duration`
| *1:1* | _xs:duration_ | Duration of this leg according to user preferences like walk speed.

|
2+| `LegDescription`
| 0:1 | _InternationalTextStructure_ | Title or summary of this leg for overview.

|
2+| `Length`
| 0:1 | _LengthType_ | Length of the leg.

|
2+| `LegTrack`
| 0:1 | _LegTrackStructure_ | Detailed description of each element of this leg including geometric projection.

|
2+| `PathGuidance`
| 0:1 | _PathGuidanceStructure_ | Structured model further describing this interchange, its geographic embedding and accessibility.

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `LegBoardStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LegBoardStructure`
2+| Describes the the situation at a stop or station at which the passenger boards a Leg of a trip including time-related information.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `ServiceArrival`
| 0:1 |  | describes the arrival situation a this leg board stop point (empty for first leg) ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `ServiceDeparture`
| *1:1* |  | describes the departure situation at this leg board stop point ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `DistributorInterchangeId`
| 0:1 | _xs:normalizedString_ | Interchange identifier of the distributing line/service at its boarding. This is not a reference. This identifier is used to recognize in a distributed environment (e.g. EU-Spirit), that two systems refer to the same line (or service) while using their own internal references. In EU-Spirit this is used to decide whether an interchange is in fact a stay-seated scanario (aka "line ID"). See https://eu-spirit.eu/

|
2+| `MeetsViaRequest`
| 0:1 | _xs:boolean_ | This stop fulfils one of the via requirements stated in the request data.

|
2+| →`StopCallStatusGroup`
| *1:1* |  | 

|===


=== The complex type `LegAlightStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LegAlightStructure`
2+| Describes the situation at a stop or station at which the passenger alights from a Leg of a trip including time-related information

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `ServiceArrival`
| *1:1* |  | describes the arrival situation at the leg alight stop point ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `ServiceDeparture`
| 0:1 |  | describes the departure situation at this leg alight stop point (empty for last leg) ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `FeederInterchangeId`
| 0:1 | _xs:normalizedString_ | Interchange identifier of the feeding line/service at its alighting. This is not a reference. This identifier is used to recognize in a distributed environment (e.g. EU-Spirit), that two systems refer to the same line (or service) while using their own internal references. In EU-Spirit this is used to decide whether an interchange is in fact a stay-seated scanario (aka "line ID"). See https://eu-spirit.eu/

|
2+| `MeetsViaRequest`
| 0:1 | _xs:boolean_ | This stop fulfils one of the via requirements stated in the request data.

|
2+| →`StopCallStatusGroup`
| *1:1* |  | 

|===


=== The complex type `LegIntermediateStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LegIntermediateStructure`
2+| Describes the situation at a stop or station that lies between the LegBoard and LegAlight stop or station including time-related information.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `ServiceArrival`
| *1:1* |  | describes the arrival situation a this leg board stop point (empty for first leg) ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `ServiceDeparture`
| *1:1* |  | describes the departure situation at this leg board stop point ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME)

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `MeetsViaRequest`
| 0:1 | _xs:boolean_ | This stop fulfils one of the via requirements stated in the request data.

|
2+| →`StopCallStatusGroup`
| *1:1* |  | 

|===


=== The complex type `PathGuidanceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PathGuidanceStructure`
2+|  description of a piece of a TRIP. May include geographic information, turn instructions and accessibility information 

|
2+| `PathGuidanceSection`
| *1:** | _PathGuidanceSectionStructure_ | one or more path guidance sections that build the trip Leg

|===


=== The complex type `PathGuidanceSectionStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PathGuidanceSectionStructure`
2+| [an extended definition of a NAVIGATION PATH in TMv6 to include the textual navigation instructions] description of a piece of a TRIP. May include geographic information, turn instructions and accessibility information 

6+| The element contains a _sequence_ of the following elements:

|
2+| `TrackSection`
| 0:1 | _TrackSectionStructure_ | LINK PROJECTION on the infrastructure network of the TRIP LEG together with time information

|
2+| `TurnDescription`
| 0:1 | _InternationalTextStructure_ | Textual description of a manoeuvre. This should imply the information from Manoeuvre, TurnAction, and TrackSection.RoadName.

|
2+| `GuidanceAdvice`
| 0:1 | _GuidanceAdviceEnumeration_ | various types of guidance advice given to travelle.

|
2+| `TurnAction`
| 0:1 | _TurnActionEnumeration_ | the range of alternative turns that can be described.

|
2+| `DirectionHint`
| 0:1 | _InternationalTextStructure_ | Textual direction hint for better understanding, e.g. "follow signs to Hamburg".

|
2+| `Bearing`
| 0:1 | _siri:AbsoluteBearingType_ | Absolute bearing after the described manoeuvre.

|
2+| `PathLink`
| 0:1 | _PathLinkStructure_ | Description of the type of accessibility on this navigation section.

|
2+| `SituationFullRef`
| 0:* | _SituationFullRefStructure_ | 

|===

=== The `TransferDurationGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TransferDurationGroup`
2+| [an attribute of a CONNECTION (not INTERCHANGE) in TMv6] calculated duration in a response taking into ccount the request parameters.; TransferDuration plus waiting time is the minimum interval between arrival and departure time..

6+| The element contains a _sequence_ of the following elements:

|
2+| `Duration`
| *1:1* | _xs:duration_ | Overall duration of this interchange.

|
2+| `WalkDuration`
| 0:1 | _xs:duration_ | Walk time as part of the overall interchange duration.

|
2+| `BufferTime`
| 0:1 | _xs:duration_ | Buffer time as part of the overall interchange duration. Buffer times, f.e. check in/out times, sometimes are mandatory for using certain services as f.e. airplanes, ferries or highspeed trains.

|===


=== The complex type `PathLinkStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PathLinkStructure`
2+| [TMv6] a link within a PLACE of or between two PLACEs (that is STOP PLACEs, ACCESS SPACEs or QUAYs,BOARDING POSITIONs,, POINTs OF INTEREST etc or PATH JUNCTIONs) that represents a step in a possible route for pedestrians, cyclists or other out-of-vehicle passengers within or between a PLACE.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Transition`
| 0:1 | _TransitionEnumeration_ | Whether path is up down or level .

|
2+| `AccessFeatureType`
| 0:1 | _AccessFeatureTypeEnumeration_ | Type of physical feature of PATH LINK.

|
2+| `Count`
| 0:1 | _xs:positiveInteger_ | Number how often the access feature occurs in this PathLink

|===

=== The `MultiPointTripRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointTripRequestGroup`
2+| Multi-point trip request structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Origin`
| *1:** | _PlaceContextStructure_ | Specifies the origin situation from where the user wants to start.

|
2+| `Destination`
| *1:** | _PlaceContextStructure_ | Specifies the destination situation where the user is heading to.

|
2+| `Via`
| 0:* | _TripViaStructure_ | Ordered series of points where the journey must pass through. If more than one via point is given all of them must be obeyed - in the correct order. The server is allowed to replace a via stop by equivalent stops.

|
2+| `NotVia`
| 0:* | _NotViaStructure_ | Not-via restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs that the TRIP is not allowed to pass through. If more than one not via point is given all of them must be obeyed.

|
2+| `NoChangeAt`
| 0:* | _NoChangeAtStructure_ | no-change-at restrictions for a TRIP, i.e. SCHEDULED STOP POINTs or STOP PLACEs at which no TRANSFER is allowed within a TRIP

|
2+| `Params`
| 0:1 | _MultiPointTripParamStructure_ | Options to control the search behaviour and response contents.

|===


=== The complex type `MultiPointTripParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointTripParamStructure`
2+| Multi-point trip request parameter structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TripDataFilterGroup`
| *1:1* |  | 

|
2+| →`TripMobilityFilterGroup`
| *1:1* |  | 

|
2+| →`MultiPointTripPolicyGroup`
| *1:1* |  | 

|
2+| →`TripContentFilterGroup`
| *1:1* |  | 

|
2+| `FareParam`
| 0:1 | _FareParamStructure_ | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

=== The `MultiPointTripPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointTripPolicyGroup`
2+| Policies that control the multi-point trip search behaviour.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`BaseTripPolicyGroup`
| *1:1* |  | 

|
2+| `TransferLimit`
| 0:1 | _xs:nonNegativeInteger_ | The maximum number of interchanges the user will accept per trip.

|
2+| `OptimisationMethod`
| 0:1 | _OptimisationMethodEnumeration_ | the types of algorithm that can be used for planning a journey (fastest, least walking, etc)

|
2+| `MultiPointType`
| 0:1 | _MultiPointTypeEnumeration_ | If a solution for any one of multiple origin/destination points is sufficient. Or a distinct solution for each of the origin/destination points has to be found.

|===

=== The `MultiPointTripResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointTripResponseGroup`
2+| Multi-point trip response structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `MultiPointTripResponseContext`
| 0:1 | _ResponseContextStructure_ | Context to hold trip response objects that occur frequently.

|
2+| `MultiPointTripResult`
| 0:* | _MultiPointTripResultStructure_ | The trip results found by the server.

|===


=== The complex type `MultiPointTripResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointTripResultStructure`
2+| Structure for a single trip result and its accompanying error messages.

6+| The element contains a _sequence_ of the following elements:

|
2+| `ResultId`
| *1:1* | _xs:NMTOKEN_ | Id of this trip result for referencing purposes. Unique within multipoint-trip response.

|
2+| `ErrorMessage`
| 0:* | _ErrorMessageStructure_ | Error messages related to trip result.

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `Trip`
| *1:1* | _TripStructure_ | Information on the trip.

||
1+| `TripSummary`
| *1:1* | _TripSummaryStructure_ | 

|
2+| →`MultiPointWaitTimeGroup`
| 0:1 |  | 

|
2+| `TripFare`
| 0:* | _TripFareResultStructure_ | 

|===

=== The `MultiPointWaitTimeGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `MultiPointWaitTimeGroup`
2+| Group for wait times at origin/destination.

6+| The element contains a _sequence_ of the following elements:

|
2+| `OriginWaitTime`
| 0:1 | _xs:duration_ | Additional wait time at origin of this trip.

|
2+| `DestinationWaitTime`
| 0:1 | _xs:duration_ | Additional wait time at destination of this trip.

|===

=== The `TripStatusGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripStatusGroup`
2+| Parameters which describe the current status of a TRIP

6+| The element contains a _sequence_ of the following elements:

|
2+| `Unplanned`
| 0:1 | _xs:boolean_ | Whether this trip is an additional one that has not been planned. Default is false.

|
2+| `Cancelled`
| 0:1 | _xs:boolean_ | Whether this trip is cancelled and will not be run. Default is false.

|
2+| `Deviation`
| 0:1 | _xs:boolean_ | Whether this trip deviates from the planned service pattern. Default is false.

|
2+| `Delayed`
| 0:1 | _xs:boolean_ | Whether this trip is delayed. Default is false.

|
2+| `Infeasible`
| 0:1 | _xs:boolean_ | Whether this trip cannot be used, due to operational delays and impossible transfers. Default is false.

|===

== OJP/OJP_JourneySupport.xsd - Supporting definitions for journeys on public transport vehicles

=== Simple type definitions

|===
| `VehicleProgressEnumeration`| _xs:string_ | Vehicle progress relative to timetable service pattern.
|===

=== The complex type `ServiceViaPointStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceViaPointStructure`
2+| [a specialisation of VIA in TMv6] STOP PLACE or SCHEDULED STOP POINT as a VIA for a particular SERVICE PATTERN. Specialisation of a VIA.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `DisplayPriority`
| 0:1 | _PriorityType_ | Priority of this via point to be displayed when space is limited.

|===


=== The complex type `ProductCategoryStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ProductCategoryStructure`
2+| Product category based on NeTEx/SIRI. A product category is a classification for VEHICLE JOURNEYs to express some common properties of journeys for marketing and fare products.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Name`
| 0:1 | _InternationalTextStructure_ | Full name of this product category, e.g. "Autoreisezug" in Switzerland or "Dampfschiff"

|
2+| `ShortName`
| 0:1 | _InternationalTextStructure_ | Short name or acronym of the product category, likely to be published, e.g. "BAV", "ARZ", "TGV". The product category is more important for publication in Switzerland than Mode / Submode.

|
2+| →`ProductCategoryRef`
| 0:1 |  | A reference to the product category. This is the internal code used within the reference frameworks (NeTEx, SIRI). It is usually not displayed, but interpreted by the technical system, e.g. "ch:1:TypeOfProductCategory:ARZ" (Autoreisezug in Switzerland) or "ch:1:TypeOfProductCategory:BAV".

|===


=== The complex type `TripViaStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripViaStructure`
2+| VIA restrictions for a TRIP.

6+| The element contains a _sequence_ of the following elements:

|
2+| `ViaPoint`
| *1:1* | _PlaceRefStructure_ | Reference to specify the via place.

|
2+| `DwellTime`
| 0:1 | _xs:duration_ | Duration the passenger wants to stay at the via place. Default is 0.

|===

=== The `ScheduledJourneyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ScheduledJourneyGroup`
2+| Vehicle journey (not dated).

6+| The element contains a _sequence_ of the following elements:

|
2+| →`JourneyRef`
| *1:1* |  | 

|
2+| →`ServiceGroup`
| *1:1* |  | 

|===

=== The `ServiceGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceGroup`
2+| Properties of a service (line and direction): attributes of Continuous Journey Structure or Dated Journey Structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`siri:LineDirectionGroup`
| *1:1* |  | 

|
2+| `Mode`
| *1:1* | _ModeStructure_ | [a specialisation of MODE in TMv6] an extended range of VEHICLE MODEs, aggregating them with some SUBMODEs

|
2+| `ProductCategory`
| 0:1 | _ProductCategoryStructure_ | A product category for the service. This is a classification defined in NeTEx/SIRI used to identify groups of journeys with some special properties for marketing and fare products, e.g. "TE2" for SNCF or a special panorama train "PE" in Switzerland.

|
2+| `PublishedServiceName`
| *1:1* | _InternationalTextStructure_ | Line name or service description as known to the public, f.e. "512", "S8" or "Circle Line" or "ICE 488".

|
2+| `TrainNumber`
| 0:1 | _xs:normalizedString_ | Contains the TrainNumber description from NeTEx. If several TrainNumber types exist, use the commercial number.

|
2+| →`OperatorRef`
| 0:1 |  | 

|
2+| `RouteDescription`
| 0:1 | _InternationalTextStructure_ | Descriptive text for a route, f.e. "Airport via City Centre"

|
2+| `Via`
| 0:* | _ServiceViaPointStructure_ | Via points of the service that may help identify the vehicle to the public.

|
2+| `Attribute`
| 0:* | _GeneralAttributeStructure_ | Note or service attribute.

|===

=== The `ServiceOriginGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceOriginGroup`
2+| First serviced stop of a vehicle journey.

6+| The element contains a _sequence_ of the following elements:

|
2+| `OriginStopPointRef`
| 0:1 | _siri:StopPointRefStructure_ | First stop of the vehicle journey; origin stop point.

|
2+| `OriginText`
| *1:1* | _InternationalTextStructure_ | Label for first stop.

|===

=== The `ServiceDestinationGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceDestinationGroup`
2+| Last serviced stop of a vehicle journey.

6+| The element contains a _sequence_ of the following elements:

|
2+| `DestinationStopPointRef`
| 0:1 | _siri:StopPointRefStructure_ | Last stop of vehicle journey; destination stop point.

|
2+| `DestinationText`
| *1:1* | _InternationalTextStructure_ | Label for last stop.

|===

=== The `RouteDescriptionGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `RouteDescriptionGroup`
2+| Descriptive text for a route, f.e. "Airport via City Centre"



The element contains only one element:

|
2+| `RouteDescriptionText`
| *1:1* | _InternationalTextStructure_ | 

|===

=== The `DatedJourneyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `DatedJourneyGroup`
2+| Vehicle journey that runs at a specific date.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OperatingDayRef`
| *1:1* |  | 

|
2+| →`siri:VehicleRef`
| 0:1 |  | 

|
2+| →`ScheduledJourneyGroup`
| *1:1* |  | 

|===

=== The `PrivateServiceGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `PrivateServiceGroup`
2+| specific service operated by a Private Mode

6+| The element contains a _sequence_ of the following elements:

|
2+| →`JourneyRef`
| 0:1 |  | 

|
2+| `PrivateMode`
| *1:1* | _PrivateModesEnumeration_ | [a category of MODE in TMv6] MODEs offered by private individuals 

|
2+| `OrganisationRef`
| 0:1 | _siri:OperatorRefStructure_ | 

|
2+| `InfoUrl`
| 0:1 | _WebLinkStructure_ | Link to web page providing more details on service.

|===


=== The complex type `DatedJourneyStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `DatedJourneyStructure`
2+| [equivalent to  DATED VEHICLE JOURNEY in TMv6]  passenger carrying VEHICLE JOURNEY for one specified DAY TYPE for which the pattern of working is in principle defined by a SERVICE JOURNEY PATTERN. DatedJourney details of a service include its operating days. 

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`DatedJourneyGroup`
| *1:1* |  | 

||
1+| →`PrivateServiceGroup`
| *1:1* |  | 

|
2+| →`ServiceOriginGroup`
| 0:1 |  | 

|
2+| →`ServiceDestinationGroup`
| *1:1* |  | 

|
2+| →`ServiceStatusGroup`
| *1:1* |  | 

|
2+| `BookingArrangements`
| 0:1 | _BookingArrangementsContainerStructure_ | Container with information on booking possibilities for this service.

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `TripPlaceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripPlaceStructure`
2+| A trip place represents the current logical position of a  journey service. It can be used similarly to a place e.g. for starting a new trip requests from within this service. A trip place does not(!) describe the relative position of a traveller within a vehicle, e.g. the seat.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`OperatingDayRef`
| *1:1* |  | 

|
2+| →`JourneyRef`
| *1:1* |  | 

|
2+| →`siri:LineIdentityGroup`
| *1:1* |  | 

|===

=== The `TimeWindowGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TimeWindowGroup`
2+| The window of opportunity that the traveller has to perform this leg of the journey.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TimeWindowStart`
| 0:1 | _xs:dateTime_ | Time at which window begins.

|
2+| `TimeWindowEnd`
| 0:1 | _xs:dateTime_ | Time at which window ends.

|===

=== The `ServiceTimeGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceTimeGroup`
2+| Contains at least scheduled time, but can contain real time and estimated times

6+| The element contains a _sequence_ of the following elements:

|
2+| `TimetabledTime`
| *1:1* | _xs:dateTime_ | time at point as it is published

|
2+| `RecordedAtTime`
| 0:1 | _xs:dateTime_ | time as it was recorded

|
2+| `EstimatedTime`
| 0:1 | _xs:dateTime_ | estimated time (for prognosis)

|
2+| →`EstimatedTimeBandGroup`
| 0:1 |  | 

|===

=== The `EstimatedTimeBandGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `EstimatedTimeBandGroup`
2+| Range for estimated time.

6+| The element contains a _sequence_ of the following elements:

|
2+| `EstimatedTimeLow`
| 0:1 | _xs:dateTime_ | Estimated lower limit for time.

|
2+| `EstimatedTimeHigh`
| 0:1 | _xs:dateTime_ | Estimated upper limit for time.

|===


=== The complex type `CallAtStopStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `CallAtStopStructure`
2+| [same as CALL in SIRI] the meeting of a VEHICLE JOURNEY with a specific SCHEDULED STOP POINT 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`StopPointGroup`
| *1:1* |  | 

|
2+| `ServiceArrival`
| 0:1 |  | Arrival times of the service at this stop ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME).

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| `ServiceDeparture`
| 0:1 |  | Departure times of the service at this stop ( group of attributes of TIMETABLED PASSING TIME, ESTIMATED PASSING TIME, OBSERVED PASSING TIME).

The element contains only one element:

|||
0+| →`ServiceTimeGroup`
| *1:1* |  | 



|
2+| →`StopCallStatusGroup`
| *1:1* |  | 

|
2+| →`SituationFullRef`
| 0:* |  | 

|===

=== The `StopCallStatusGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopCallStatusGroup`
2+| Status properties for the vehicle call at this stop.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Order`
| 0:1 | _xs:positiveInteger_ | Sequence number of this stop in the service pattern of the journey.

|
2+| `RequestStop`
| 0:1 | _xs:boolean_ | The vehicle journey calls at this stop only on demand.

|
2+| `UnplannedStop`
| 0:1 | _xs:boolean_ | This stop has not been planned by the planning department.

|
2+| `NotServicedStop`
| 0:1 | _xs:boolean_ | The vehicle will not call at this stop despite earlier planning.

|
2+| `NoBoardingAtStop`
| 0:1 | _xs:boolean_ | Boarding will not be allowed at this stop of this journey.

|
2+| `NoAlightingAtStop`
| 0:1 | _xs:boolean_ | Alighting will not be allowed at this stop of this journey.

|===

=== The `ServiceStatusGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceStatusGroup`
2+| parameters which describe the current status of a DATED VEHICLE JOURNEY

6+| The element contains a _sequence_ of the following elements:

|
2+| `Unplanned`
| 0:1 | _xs:boolean_ | Whether this trip is an additional one that has not been planned. Default is false.

|
2+| `Cancelled`
| 0:1 | _xs:boolean_ | Whether this trip is cancelled and will not be run. Default is false.

|
2+| `Deviation`
| 0:1 | _xs:boolean_ | Whether this trip deviates from the planned service pattern. Default is false.

|
2+| `Occupancy`
| 0:1 | _siri:OccupancyEnumeration_ | [equivalent to OCCUPANCY in SIRI] passenger load status of a VEHICLE. If omitted, not known.

|===


=== The complex type `ContinuousServiceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ContinuousServiceStructure`
2+| [a special form of SERVICE JOURNEY in TMv6] a vehicle movement on a continuous, non-timetabled service.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `ContinuousMode`
| *1:1* | _ContinuousModesEnumeration_ | Continuous transport options.

||
1+| `IndividualMode`
| *1:1* | _IndividualModesEnumeration_ | Individual transport options.

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`DatedJourneyGroup`
| 0:1 |  | 

||
1+| `SharingService`
| 0:1 | _SharingServiceStructure_ | 

|
2+| →`ServiceOriginGroup`
| 0:1 |  | 

|
2+| →`ServiceDestinationGroup`
| 0:1 |  | 

|
2+| `BookingArrangements`
| 0:1 | _BookingArrangementsContainerStructure_ | Container with information on booking possibilities for this service.

|
2+| →`SituationFullRef`
| 0:* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `VehiclePositionStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `VehiclePositionStructure`
2+| Geographical and logical position of a vehicle.

6+| The element contains a _sequence_ of the following elements:

|
2+| `GeoPosition`
| 0:1 | _siri:LocationStructure_ | Geographic position of vehicle.

|
2+| `Progress`
| 0:1 | _VehicleProgressEnumeration_ | Logical progress of vehicle relative to service pattern.

|
2+| `Bearing`
| 0:1 | _siri:AbsoluteBearingType_ | Bearing in compass degrees in which vehicle is heading.

|
2+| `ProgressBetweenStops`
| 0:1 | _siri:ProgressBetweenStopsStructure_ | Provides information about the progress of the vehicle along its current link, that is link from previous visited top to current position.

|===


=== The complex type `PlaceContextStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PlaceContextStructure`
2+| [a view of PLACE in TMv6] a PLACE and access to it by individual transport 

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `PlaceRef`
| *1:1* | _PlaceRefStructure_ | Static place.

||
1+| `TripPlace`
| *1:1* | _TripPlaceStructure_ | Place within a (moving) vehicle.

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `DepArrTime`
| 0:1 | _xs:dateTime_ | Time when departure/arrival from/to place is required.

||
1+| `TimeAllowance`
| 0:1 | _xs:duration_ | Extra time needed before reaching/after leaving this place.

|
2+| `IndividualTransportOptions`
| 0:* | _IndividualTransportOptionsStructure_ | Options how to access/leave the place by individual transport.

|===

=== The `NumberOfResultsGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `NumberOfResultsGroup`
2+| parameter to control the number of TRIP results before/after a point in time. May NOT be used when departure time at origin AND arrival time at destination are set

6+| The element contains a _sequence_ of the following elements:

|
2+| `NumberOfResultsBefore`
| *1:1* | _xs:nonNegativeInteger_ | The desired number of trip results before the given time (at origin or destination).

|
2+| `NumberOfResultsAfter`
| *1:1* | _xs:nonNegativeInteger_ | The desired number of trip results after the given time (at origin or destination).

|===

=== The `BaseTripPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `BaseTripPolicyGroup`
2+| Policies that control the trip search behaviour for both public and individual transport.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`NumberOfResultsGroup`
| 0:1 |  | 

||
1+| `NumberOfResults`
| 0:1 | _xs:positiveInteger_ | The number of trip results that the user wants to see at least.

|
2+| `IgnoreRealtimeData`
| 0:1 | _xs:boolean_ | The trip calculation should not use any realtime or incident data.

|
2+| `ImmediateTripStart`
| 0:1 | _xs:boolean_ | Whether the trip calculation should find a solution that starts immediately (f.e. because the user is already on the way) instead of finding the latest possible start opportunity.

|===

=== The `BaseTripMobilityFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `BaseTripMobilityFilterGroup`
2+| Base mobility options to be applied for both public and individual transport.

6+| The element contains a _sequence_ of the following elements:

|
2+| `NoSingleStep`
| 0:1 | _xs:boolean_ | The user is not able to climb one step.

|
2+| `NoStairs`
| 0:1 | _xs:boolean_ | The user is not able to walk up/down stairs.

|
2+| `NoEscalator`
| 0:1 | _xs:boolean_ | The user is not able to use an escalator.

|
2+| `NoElevator`
| 0:1 | _xs:boolean_ | The user is not able to use an elevator.

|
2+| `NoRamp`
| 0:1 | _xs:boolean_ | The user is not able to use an ramp.

|
2+| `NoSight`
| 0:1 | _xs:boolean_ | The user is not able to see.

|===

=== The `BaseTripContentFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `BaseTripContentFilterGroup`
2+| Parameters to control the level of detail of both public and individual transport journey results.

6+| The element contains a _sequence_ of the following elements:

|
2+| `IncludeTrackSections`
| 0:1 | _xs:boolean_ | Whether the result should include TrackSection elements to describe the geographic route of each journey leg.

|
2+| `IncludeLegProjection`
| 0:1 | _xs:boolean_ | Whether the result should include the geographic projection (coordinates) of each journey leg.

|
2+| `IncludeTurnDescription`
| 0:1 | _xs:boolean_ | Whether the result should include turn-by-turn instructions for each journey leg.

|
2+| `IncludeAccessibility`
| 0:1 | _xs:boolean_ | Whether the result should include accessibility information.

|
2+| `IncludePlacesContext`
| 0:1 | _xs:boolean_ | Whether the place context is needed. If a requestor has that information already, the response can be made slimmer, when set to false. Default is true. 

|
2+| `IncludeSituationsContext`
| 0:1 | _xs:boolean_ | Wheter the situation context is needed. If a requestor has that information by other means or can't process it, the response can be made slimmer, when set to false. Default is true

|===


=== The complex type `LegAttributeStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LegAttributeStructure`
| _←GeneralAttributeStructure_ | Attributes that are not valid on the whole service, but only on section of a TRIP made on a single MODE without interchange between boarding and alighting (facilities available on a specified (part of a) Leg of a VEHICLE JOURNEY)

6+| The element contains a _sequence_ of the following elements:

|
2+| `FromStopSeqNumber`
| 0:1 | _xs:positiveInteger_ | The attribute is valid from the stop point with this sequence number within the leg. If missing it is valid from the beginning of the leg.

|
2+| `ToStopSeqNumber`
| 0:1 | _xs:positiveInteger_ | The attribute is valid to the stop point (inclusively) with this sequence number within the leg. If missing it is valid to the end of the leg.

|===


=== The complex type `LegTrackStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LegTrackStructure`
2+| The LINK PROJECTION of a Leg onto the topography of the route being followed.

|
2+| `TrackSection`
| *1:** | _TrackSectionStructure_ | LINK PROJECTION on the infrastructure network of the TRIP LEG together with time information

|===


=== The complex type `TrackSectionStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TrackSectionStructure`
2+| LINK PROJECTION on the infrastructure network of the TRIP LEG together with time information

6+| The element contains a _sequence_ of the following elements:

|
2+| `TrackStart`
| 0:1 | _PlaceRefStructure_ | Start place of this track.

|
2+| `TrackEnd`
| 0:1 | _PlaceRefStructure_ | End place of this track.

|
2+| `LinkProjection`
| 0:1 |  | an oriented correspondence from one LINK of a source layer, onto an entity in a target layer: e.g. LINK SEQUENCE, COMPLEX FEATURE, within a defined TYPE OF PROJECTION

The element contains only one element:

|||
0+| `Position`
| 2:* | _siri:LocationStructure_ | 



|
2+| `RoadName`
| 0:1 | _xs:string_ | Name of the road this track section is attached to.

|
2+| `Duration`
| 0:1 | _xs:duration_ | Duration the passenger needs to travel through this track section.

|
2+| `Length`
| 0:1 | _siri:DistanceType_ | Length of this track section.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

== OJP/OJP_SituationSupport.xsd - Supporting definitions for situations containing wrappers for SIRI Situation Exchange service (SIRI SX)


=== The complex type `SituationsStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `SituationsStructure`
2+| Wrapper type for SIRI PtSituationsElementStructure

6+| The element contains a _sequence_ of the following elements:

|
2+| `PtSituation`
| 0:* | _siri:PtSituationElementStructure_ | SIRI situation details.

|
2+| `RoadSituation`
| 0:* | _siri:RoadSituationElementStructure_ | 

|===

=== The toplevel element `SituationFullRef`


[cols="1,1,1,20,20,30"]
|===
4+|`SituationFullRef`
| _→SituationFullRefStructure_ |Reference to situation message. Message details might be found in response context or through other communication channels.


|===


=== The complex type `SituationFullRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `SituationFullRefStructure`
| _←siri:SituationFullRefStructure_ | Reference structure for situation message. Situation details might be found in response context or through other communication channels.

|===

== OJP/OJP_TripInfo.xsd - Request and response definitions for information on a single trip

=== The `TripInfoRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoRequestGroup`
2+| TripInfo request structure.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| →`DatedJourneyRefGroup`
| *1:1* |  | 

||
1+| →`TimedVehicleRefGroup`
| *1:1* |  | 

|
2+| `Params`
| 0:1 | _TripInfoParamStructure_ | Request parameter.

|===


=== The complex type `TripInfoParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoParamStructure`
2+| TripInfo request parameter structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TripInfoPolicyGroup`
| *1:1* |  | 

|
2+| →`TripInfoContentFilterGroup`
| *1:1* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

=== The `TripInfoPolicyGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoPolicyGroup`
2+| Parameters that control the response behaviour.



The element contains only one element:

|
2+| `UseTimetabledDataOnly`
| 0:1 | _xs:boolean_ | Do not show any realtime or incident data. Default is false.

|===

=== The `TripInfoContentFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoContentFilterGroup`
2+| Parameters that control the level of detail to be returned in the results.

6+| The element contains a _sequence_ of the following elements:

|
2+| `IncludeCalls`
| 0:1 | _xs:boolean_ | Whether call information is to be included. Default is true.

|
2+| `IncludePosition`
| 0:1 | _xs:boolean_ | Whether current position is to be included. Default is true.

|
2+| `IncludeService`
| 0:1 | _xs:boolean_ | Whether service information is to be included. Default is true.

|
2+| `IncludeTrackSections`
| 0:1 | _xs:boolean_ | Whether the result should include TrackSection elements to describe the geographic route of this vehicle journey.

|
2+| `IncludeTrackProjection`
| 0:1 | _xs:boolean_ | Whether the result should include the geographic projection (coordinates) of this vehicle journey.

|
2+| `IncludePlacesContext`
| 0:1 | _xs:boolean_ | Whether the place context is needed. If a requestor has that information already, the response can be made slimmer, when set to false. Default is true. 

|
2+| `IncludeSituationsContext`
| 0:1 | _xs:boolean_ | Wheter the situation context is needed. If a requestor has that information by other means or can't process it, the response can be made slimmer, when set to false. Default is true

|===

=== The `TripInfoResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoResponseGroup`
2+| TripInfo response structure.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TripInfoResponseContext`
| 0:1 | _ResponseContextStructure_ | Response context.

|
2+| `TripInfoResult`
| 0:1 | _TripInfoResultStructure_ | Result structure.

|===


=== The complex type `TripInfoResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripInfoResultStructure`
2+| TripInfo result structure containing the current status of a trip.

6+| The element contains a _sequence_ of the following elements:

|
2+| `PreviousCall`
| 0:* | _CallAtStopStructure_ | The stops this service already has called at. Including the current stop if service is currently at stop.

|
2+| `CurrentPosition`
| 0:1 | _VehiclePositionStructure_ | Current position of this service.

|
2+| `OnwardCall`
| 0:* | _CallAtStopStructure_ | The stops this service still has to call at.

|
2+| `Service`
| 0:1 | _DatedJourneyStructure_ | Description of the service.

|
2+| →`OperatingDaysGroup`
| 0:1 |  | 

|
2+| →`ServiceFacilityGroup`
| 0:1 |  | 

|
2+| `JourneyTrack`
| 0:1 | _LegTrackStructure_ | Geographic embedding of this journey. The entire journey is regarded as one leg.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

== OJP/OJP_Fare.xsd - Request and response definitions for general, stop-specific and trip-specific fare information

=== The `FareRequestGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareRequestGroup`
2+| Fare request structure.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `MultiTripFareRequest`
| *1:1* | _MultiTripFareRequestStructure_ | A request to calculate aggregated Fare information of multiple single trips

||
1+| `StaticFareRequest`
| *1:1* | _StaticFareRequestStructure_ | A request for general/static Fare information.

||
1+| `StopFareRequest`
| *1:1* | _StopFareRequestStructure_ | A request for stop-related Fare information.

||
1+| `TripFareRequest`
| *1:1* | _TripFareRequestStructure_ | A request to calculate the Fare information of a single trip

|
2+| `Params`
| 0:1 | _FareParamStructure_ | Parameter to filter the response contents.

|===


=== The complex type `StopFareRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopFareRequestStructure`
2+| Sub-request: stop-related fare information.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`siri:StopPointRef`
| *1:1* |  | 

|
2+| `Date`
| 0:1 | _xs:date_ | Date for which to retrieve Fare information.

|===


=== The complex type `StaticFareRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StaticFareRequestStructure`
2+| General Fare information. May depend on date.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Date`
| 0:1 | _xs:date_ | Date for which to retrieve Fare information.

|
2+| →`FareProductRef`
| 0:* |  | 

|===


=== The complex type `TripFareRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripFareRequestStructure`
2+| Structure of a Single Trip Fare Request.

|
2+| `Trip`
| *1:1* | _TripStructure_ | A complete trip from origin to destination

|===


=== The complex type `MultiTripFareRequestStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `MultiTripFareRequestStructure`
2+| Structure of a Multi Trip Fare Request.

|
2+| `Trip`
| *1:** | _TripStructure_ | Multiple complete trips from multiple origins and multiple destination

|===

=== The `FareResponseGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareResponseGroup`
2+| 

6+| The element contains a _sequence_ of the following elements:

|
2+| `FareResponseContext`
| 0:1 | _ResponseContextStructure_ | Context to hold trip response objects that occur frequently.

|
2+| `FareResult`
| 0:* | _FareResultStructure_ | Fare result choice element.

|===


=== The complex type `FareResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FareResultStructure`
2+| Wrapper element for Fare results.

6+| The element contains a _sequence_ of the following elements:

|
2+| `ResultId`
| *1:1* | _xs:NMTOKEN_ | ID of this result.

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `MultiTripFareResult`
| *1:** | _MultiTripFareResultStructure_ | Fare and FareProducts for multiple trips.

||
1+| `StaticFareResult`
| *1:1* | _StaticFareResultStructure_ | Static Fare information.

||
1+| `StopFareResult`
| *1:1* | _StopFareResultStructure_ | Stop-related Fare information.

||
1+| `TripFareResult`
| *1:** | _TripFareResultStructure_ | Fare and FareProducts for a given trip.

|===


=== The complex type `StopFareResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StopFareResultStructure`
2+| Stop-related Fare information.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TariffZoneListInArea`
| *1:** | _TariffZoneListInAreaStructure_ | One or more lists of Fare zones that belong to a Fare authority/area.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `StaticFareResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `StaticFareResultStructure`
2+| General Fare information.

6+| The element contains a _sequence_ of the following elements:

|
2+| `FareProduct`
| 0:* | _FareProductStructure_ | [related to FARE PRODUCT in TM and NeTEx] different FARE PRODUCTs that may be available with related information.

|
2+| `StaticInfoUrl`
| 0:* | _WebLinkStructure_ | URL to information page on the web.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `TripFareProductReferenceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripFareProductReferenceStructure`
2+| Element that connects FareProducts to trips. A TripFareProduct is a FAREPRODUCT covering a part or the whole of a TRIP from boarding the first public transport vehicle to alighting from the last public transport vehicle (corresponds to a package of PREASSIGNED FARE PRODUCTs)

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareProductRef`
| *1:1* |  | 

|
2+| `FromTripIdRef`
| *1:1* | _xs:NMTOKEN_ | Identifies the "valid from" trip.

|
2+| `FromTripLegIdRef`
| 0:1 | _xs:NMTOKEN_ | Identifies the "valid from" tripLeg. If missing, then valid from the first leg.

|
2+| `ToTripIdRef`
| *1:1* | _xs:NMTOKEN_ | Identifies the "valid to" trip.

|
2+| `ToTripLegIdRef`
| 0:1 | _xs:NMTOKEN_ | Identifies the "valid to" tripLeg. If missing, then valid to the last leg.

|===


=== The complex type `MultiTripFareResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `MultiTripFareResultStructure`
2+| Structure of a Multi Trip Fare Request result

6+| The element contains a _sequence_ of the following elements:

|
2+| `ErrorMessage`
| 0:* | _ErrorMessageStructure_ | Result-specific error messages.

|
2+| `TripFareProductReference`
| *1:** | _TripFareProductReferenceStructure_ | Non-empty list of trip references in the corresponding MultiTripFareRequestStructure

|
2+| `FareProduct`
| 0:* | _FareProductStructure_ | Zero, one or more FareProducts that are valid for the referenced trips / part of trips.

|
2+| `PassedZones`
| 0:1 | _TariffZoneListInAreaStructure_ | The set of passed zones.

|
2+| `StaticInfoUrl`
| 0:* | _WebLinkStructure_ | URL to Fare information pages on the web.

|===

== OJP/OJP_FareSupport.xsd - Supporting definitions for fare information on passenger trips

=== Simple type definitions

|===
| `EntitlementProductCodeType`| _xs:NMTOKEN_ | Identifier of a traveller card (f.e. BahnCard50, BahnCard50First etc.).
| `FareAuthorityCodeType`| _xs:NMTOKEN_ | Identifier of a Fare Authority.
| `FareProductCodeType`| _xs:NMTOKEN_ | Identifier of a FareProduct
| `PassengerCategoryEnumeration`| _xs:string_ | [a simplified and specialised view of USER PROFILE in TM and NeTEx] classification of passengers by age or other factors that may determine the fare they will need to pay.
| `TariffZoneCodeType`| _xs:NMTOKEN_ | Identifier of a fare zone.
| `TypeOfFareClassEnumeration`| _xs:NMTOKEN_ | classes of travel available on a particular service which will affect the price to be paid
| `VatRateEnumeration`| _xs:NMTOKEN_ | Enumeration of Value Added Tax rates.
|===

=== The complex type `FareAuthorityRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FareAuthorityRefStructure`
2+| Reference to a Fare Authority ([a specialisation of an ORGANISATION in TMv6] ORGANISATION which has the RESPONSIBILITY ROLE for the definition of FARE PRODUCTs).

|===

=== The toplevel element `FareAuthorityRef`


[cols="1,1,1,20,20,30"]
|===
4+|`FareAuthorityRef`
| _→FareAuthorityRefStructure_ |Reference to a Fare Authority.


|===

=== The `FareAuthorityGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareAuthorityGroup`
2+| Group of attributes for an ORGANISATION which has the RESPONSIBILITY ROLE for the definition of FARE PRODUCTs 

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareAuthorityRef`
| *1:1* |  | 

|
2+| `FareAuthorityText`
| *1:1* | _xs:string_ | Textual description or name of Fare authority.

|===


=== The complex type `TariffZoneRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TariffZoneRefStructure`
2+| Reference to a fare zone.

|===

=== The toplevel element `TariffZoneRef`


[cols="1,1,1,20,20,30"]
|===
4+|`TariffZoneRef`
| _→TariffZoneRefStructure_ |Reference to a fare zone.


|===


=== The complex type `TariffZoneStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TariffZoneStructure`
2+| [a more clearly defined equivalent of TARIFF ZONE in TM and NeTEx] A ZONE used to define a zonal fare structure in a zone-counting or zone-matrix system.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`TariffZoneRef`
| *1:1* |  | 

|
2+| `TariffZoneText`
| *1:1* | _xs:string_ | Text describing the fare zone. Passengers will recognize the fare zone by this text. Often published on Fare Zone Maps.

|===


=== The complex type `TariffZoneListInAreaStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TariffZoneListInAreaStructure`
2+| List of fare zones within the area of a Fare Authority.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareAuthorityGroup`
| *1:1* |  | 

|
2+| `TariffZone`
| *1:** | _TariffZoneStructure_ | Fare zone in area.

|===


=== The complex type `TariffZoneRefListStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TariffZoneRefListStructure`
2+| List of fare zones references within the area of a Fare Authority.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareAuthorityRef`
| *1:1* |  | 

|
2+| →`TariffZoneRef`
| *1:** |  | 

|===


=== The complex type `BookingArrangementStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `BookingArrangementStructure`
2+| [a more generalised form of BOOKING ARRANGEMENTS in TMv6] arrangement for booking any leg or legs of a journey 

6+| The element contains a _sequence_ of the following elements:

|
2+| `BookingAgencyName`
| 0:1 | _InternationalTextStructure_ | Name of the booking agency (contractual partner).

|
2+| `BookingUrl`
| 0:1 | _WebLinkStructure_ | URL to online booking service.

|
2+| `InfoUrl`
| 0:1 | _WebLinkStructure_ | URL to information page.

|
2+| `PhoneNumber`
| 0:1 | _PhoneNumberType_ | Phone number for booking.

|
2+| `MinimumBookingPeriod.`
| 0:1 | _xs:duration_ | Minimum duration bookings must be completed before trip starts.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `BookingArrangementsContainerStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `BookingArrangementsContainerStructure`
2+| Container for multiple booking arrangements.

6+| The element contains a _sequence_ of the following elements:

|
2+| `BookingArrangement`
| *1:** | _BookingArrangementStructure_ | [a more generalised form of BOOKING ARRANGEMENTS in TMv6] arrangement for booking any leg or legs of a journey.

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===


=== The complex type `FareProductRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FareProductRefStructure`
2+| Reference to a FareProduct.

|===

=== The toplevel element `FareProductRef`


[cols="1,1,1,20,20,30"]
|===
4+|`FareProductRef`
| _→FareProductRefStructure_ |Reference to a FareProduct.


|===


=== The complex type `EntitlementProductRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `EntitlementProductRefStructure`
2+| Reference to a a precondition to access a service or to purchase a FARE PRODUCT issued by an organisation that may not be a PT operator (eg: military card, concessionary card, etc).

|===

=== The toplevel element `EntitlementProductRef`


[cols="1,1,1,20,20,30"]
|===
4+|`EntitlementProductRef`
| _→EntitlementProductRefStructure_ |Reference to a a precondition to access a service or to purchase a FARE PRODUCT issued by an organisation that may not be a PT operator (eg: military card, concessionary card, etc).


|===


=== The complex type `FareProductStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FareProductStructure`
2+| [related to FARE PRODUCT in TM and NeTEx] different FARE PRODUCTs that may be available with related information

6+| The element contains a _sequence_ of the following elements:

|
2+| `FareProductId`
| *1:1* | _FareProductCodeType_ | Unique Id of the FareProduct.

|
2+| `FareProductName`
| *1:1* | _xs:string_ | printable FareProduct name

|
2+| →`FareAuthorityGroup`
| *1:1* |  | 

|
2+| `ProtoProduct`
| 0:1 | _xs:boolean_ | Is this product a proto product? Default is false. If true, it should not be shown to the user. In a distributed environment (e.g. EU-Spirit) partial systems may generate incomplete product information (proto product), which has to be be processed further and combined with other information before it is a complete fare product and can be shown to the user. See https://eu-spirit.eu/

|
2+| →`FareProductPriceGroup`
| *1:1* |  | 

|
2+| →`FareProductValidityGroup`
| *1:1* |  | 

|
2+| →`FareProductBookingGroup`
| *1:1* |  | 

|
2+| `Extension`
| 0:1 | _xs:anyType_ | 

|===

=== The `FareProductPriceGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareProductPriceGroup`
2+| [related to FARE PRODUCT PRICE in TM and NeTEx] price at which a FARE PRODUCT can be purchased.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Price`
| 0:1 | _xs:decimal_ | FareProduct price as decimal number.

|
2+| `NetPrice`
| 0:1 | _xs:decimal_ | Net FareProduct price as decimal number for accounting purposes.

|
2+| `Currency`
| 0:1 | _xs:NMTOKEN_ | iso 4217 currency code, e.g. EUR for Euro or GBP for Pound Sterling 

|
2+| `VatRate`
| 0:1 | _VatRateEnumeration_ | Rate of value added tax. Default is unknown.

|===

=== The `FareProductValidityGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareProductValidityGroup`
2+| conditions of use for a particular FARE PRODUCT.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TravelClass`
| 0:1 | _TypeOfFareClassEnumeration_ | Travel class for which the FareProduct is valid.

|
2+| `RequiredCard`
| 0:* | _EntitlementProductRefStructure_ | One or more traveller cards that are needed for purchase of this FareProduct. In most cases traveller cards offer discounts, f.e. BahnCard50 of Deutsche Bahn.

|
2+| `ValidFor`
| 0:* | _PassengerCategoryEnumeration_ | Sequence of all passenger categories for which this FareProduct is valid.

|
2+| `ValidityDuration`
| 0:1 | _xs:duration_ | Maximum duration of FareProduct validity starting with purchase of ticket or begin of journey (ticket validation).

|
2+| `ValidityDurationText`
| 0:1 | _InternationalTextStructure_ | Textual description of maximum validity duration.

|
2+| `ValidityTariffZones`
| 0:* | _TariffZoneListInAreaStructure_ | Spatial validity of FareProduct defined as list of fare zones.

|
2+| `ValidityAreaText`
| 0:1 | _InternationalTextStructure_ | Textual description of spatial validity.

|===

=== The `FareProductBookingGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareProductBookingGroup`
2+| [aggregation of DISTRIBUTION CHANNEL and BOOKING ARRANGEMENT in TM and NeTEx] Group of information elements related to information to support the process of booking a FARE PRODUCT.

6+| The element contains a _sequence_ of the following elements:

|
2+| `InfoUrl`
| 0:* | _WebLinkStructure_ | URL to information for this FareProduct

|
2+| `SaleUrl`
| 0:* | _WebLinkStructure_ | URL to buy the FareProduct online

|
2+| `BookingArrangements`
| 0:* | _BookingArrangementsContainerStructure_ | 

|===

=== The `TripLegRangeGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TripLegRangeGroup`
2+| Range of trip legs (from - to) for which a Fare result (ticket) is valid.

6+| The element contains a _sequence_ of the following elements:

|
2+| `FromTripLegIdRef`
| *1:1* | _xs:NMTOKEN_ | Identifies the "valid from" trip leg.

|
2+| `ToTripLegIdRef`
| *1:1* | _xs:NMTOKEN_ | Identifies the "valid to" trip leg.

|===


=== The complex type `TripFareResultStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `TripFareResultStructure`
2+| Structure of a Single Trip Fare Request result

6+| The element contains a _sequence_ of the following elements:

|
2+| `ErrorMessage`
| 0:* | _ErrorMessageStructure_ | Result-specific error messages 

|
2+| →`TripLegRangeGroup`
| 0:1 |  | 

|
2+| `PassedZones`
| 0:1 | _TariffZoneListInAreaStructure_ | The sequence of passed fare zones.

|
2+| `FareProduct`
| 0:* | _FareProductStructure_ | One ore more FareProducts that are valid for this part of the trip.

|
2+| `StaticInfoUrl`
| 0:* | _WebLinkStructure_ | URL to static information page on the web.

|===


=== The complex type `FarePassengerStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FarePassengerStructure`
2+| [a specialised form of USER PROFILE in TM and NeTEx] attributes of a passenger that influence the price to be paid by that passenger for a FARE PRODUCT.

6+| The element contains a _sequence_ of the following elements:

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `Age`
| *1:1* | _xs:nonNegativeInteger_ | Age of the passenger on the day of travel.

||
1+| `PassengerCategory`
| *1:1* | _PassengerCategoryEnumeration_ | sequence of all passenger categories, for which this FareProduct is valid

|
2+| `EntitlementProduct`
| 0:* | _EntitlementProductRefStructure_ | [a specific form of TRAVEL DOCUMENT in TM and NeTEx] a precondition to access a service or to purchase a FARE PRODUCT issued by an organisation that may not be a PT operator (eg: military card, concessionary card, etc) 

|
5+|
|
5+|Then, the element contains _one of_ the following elements:

||
1+| `SalesPackageElementRef`
| *1:** | _FareProductRefStructure_ | Id of a FareProduct that the passenger already holds and that may be used for the travel or parts of it.

||
1+| `ZonesAlreadyPaid`
| *1:1* | _TariffZoneRefListStructure_ | Fare zones for which the passenger already has a valid FareProduct.

|===

=== The `FareDataFilterGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `FareDataFilterGroup`
2+| Data filter group for Fare request.

6+| The element contains a _sequence_ of the following elements:

|
2+| `FareAuthorityFilter`
| 0:* | _FareAuthorityRefStructure_ | Fare authority for which to retrieve Fare information.

|
2+| `PassengerCategory`
| 0:* | _PassengerCategoryEnumeration_ | sequence of all passenger categories, for which this FareProduct is valid

|
2+| `TravelClass`
| 0:1 | _TypeOfFareClassEnumeration_ | Travel class for which to retrieve FareProducts. Refers to TYPE OF FARE CLASS

|===


=== The complex type `FareParamStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `FareParamStructure`
2+| [related to the FARE parameter model in TM and NeTEx] parameters which are used to determine the price to be paid for a FARE PRODUCT by a specific passenger.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`FareDataFilterGroup`
| *1:1* |  | 

|
2+| `Traveller`
| 0:* | _FarePassengerStructure_ | Number of travellers that will make the journey and for which Fare information needs to be gathered.

|===

== OJP/OJP_Common.xsd - Supporting definitions of common structures

=== Simple type definitions

|===
| `JourneyCodeType`| _xs:NMTOKEN_ | Identifier of a Journey
| `OperatingDayCodeType`| _xs:NMTOKEN_ | Identifier of an Operating Day
| `OwnerCodeType`| _xs:NMTOKEN_ | identifier of ORGANISATION with ownership as the RESPONSIBILITY ROLE
| `ProductCategoryCodeType`| _xs:NMTOKEN_ | Type for identifier of an product category code.
| `SharingModelEnumeration`| _xs:NMTOKEN_ | Sharing service loan and return scheme.
| `WeekdayTypeEnumeration`| _xs:string_ | [a specialisation of DAY OF WEEK in TMv6] enumeration of individual the seven DAYs OF WEEK, along with public holidays 
|===

=== The complex type `ErrorMessageStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ErrorMessageStructure`
2+| Structured error messages

6+| The element contains a _sequence_ of the following elements:

|
2+| `Code`
| *1:1* | _xs:normalizedString_ | Code of the error situation.

|
2+| `Text`
| 0:1 | _InternationalTextStructure_ | Description of the error situation.

|===


=== The complex type `PrivateCodeStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PrivateCodeStructure`
2+| Code within scope of a private referential system

6+| The element contains a _sequence_ of the following elements:

|
2+| `System`
| *1:1* | _xs:NMTOKEN_ | Code of the foreign referential system.

|
2+| `Value`
| *1:1* | _xs:NMTOKEN_ | Object code within this private/foreign system.

|===

=== The toplevel element `ParticipantRef`


[cols="1,1,1,20,20,30"]
|===
4+|`ParticipantRef`
| _→siri:ParticipantRefStructure_ |Reference to a Participant ([equivalent of PARTICIPANT in SIRI] IT system that is participating in a communication with other participant(s))


|===

=== The toplevel element `OperatorRef`


[cols="1,1,1,20,20,30"]
|===
4+|`OperatorRef`
| _→siri:OperatorRefStructure_ |Reference to an Operator ([TMv6] company  providing public transport services.) 


|===


=== The complex type `OperatorFilterStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OperatorFilterStructure`
2+| Filter for in/exclusion of transport operators.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Exclude`
| 0:1 | _xs:boolean_ | Whether operators in list are to include or exclude from search. Default is exclude.

|
2+| `OperatorRef`
| 0:* | _siri:OperatorRefStructure_ | Reference to transport operator

|===


=== The complex type `ProductCategoryRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ProductCategoryRefStructure`
2+| Reference to a product category. As defined in NeTEx and SIRI, a product category is a classification for VEHICLE JOURNEYs to express some common properties of journeys for marketing and fare products, e.g. to identify boats that run with steam in Switzerland ("BAV")

|===

=== The toplevel element `ProductCategoryRef`


[cols="1,1,1,20,20,30"]
|===
4+|`ProductCategoryRef`
| _→siri:ProductCategoryRefStructure_ |Reference to a product category. Product categories should be defined once and used uniformly in all channels (e.g. NeTEx, SIRI, OJP)


|===


=== The complex type `LineDirectionFilterStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `LineDirectionFilterStructure`
2+| Filter for in/exclusion of lines (and directions).

6+| The element contains a _sequence_ of the following elements:

|
2+| `Line`
| *1:** | _siri:LineDirectionStructure_ | Reference a GROUP of DIRECTIONs  of the ROUTEs belonging to the same LINE created  for the purpose of filtering and organising timetables..

|
2+| `Exclude`
| 0:1 | _xs:boolean_ | Whether lines in list are to include or exclude from search. Default is exclude.

|===


=== The complex type `JourneyRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `JourneyRefStructure`
2+| Reference to a Journey

|===

=== The toplevel element `JourneyRef`


[cols="1,1,1,20,20,30"]
|===
4+|`JourneyRef`
| _→JourneyRefStructure_ |Reference to a Journey


|===

=== The `DatedJourneyRefGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `DatedJourneyRefGroup`
2+| Reference to a DATED VEHICLE JOURNEY (Reference to a journey on a specific operating day)

6+| The element contains a _sequence_ of the following elements:

|
2+| →`JourneyRef`
| *1:1* |  | 

|
2+| →`OperatingDayRef`
| *1:1* |  | 

|===

=== The `TimedVehicleRefGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `TimedVehicleRefGroup`
2+| Reference to a vehicle for a specific point in time.

6+| The element contains a _sequence_ of the following elements:

|
2+| →`siri:VehicleRef`
| *1:1* |  | 

|
2+| `TimeOfOperation`
| *1:1* | _xs:dateTime_ | Time stamp when the vehicle is operating. In most use cases equal to "now".

|===

=== The `SharingServiceUsageGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `SharingServiceUsageGroup`
2+| Usage parameters of a sharing service.

6+| The element contains a _sequence_ of the following elements:

|
2+| `TimeBufferBefore`
| 0:1 | _xs:duration_ | Typical time a user will need  to check in and unlock the vehicle.

|
2+| `TimeBufferAfter`
| 0:1 | _xs:duration_ | Typical time a user will need  to lock the vehicle and check out.

|===


=== The complex type `SharingServiceStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `SharingServiceStructure`
2+| Service that provides shared vehicles.

6+| The element contains a _sequence_ of the following elements:

|
2+| `OperatorRef`
| *1:1* | _siri:OperatorRefStructure_ | Identifier of the operator of the sharing service 

|
2+| `Name`
| 0:1 | _xs:string_ | Public name of the service.

|
2+| `SharingModel`
| 0:1 | _SharingModelEnumeration_ | Type of the sharing scheme.

|
2+| →`SharingServiceUsageGroup`
| 0:1 |  | 

|
2+| `InfoUrl`
| 0:1 | _WebLinkStructure_ | Link to web page providing more details on service.

|===


=== The complex type `OwnerRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OwnerRefStructure`
2+| Reference to an ORGANISATION with ownership as the RESPONSIBILITY ROLE

|===

=== The toplevel element `OwnerRef`


[cols="1,1,1,20,20,30"]
|===
4+|`OwnerRef`
| _→OwnerRefStructure_ |Reference to an  ORGANISATION with ownership as the RESPONSIBILITY ROLE


|===


=== The complex type `OperatingDayRefStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OperatingDayRefStructure`
2+| Reference to an Operating Day

|===

=== The toplevel element `OperatingDayRef`


[cols="1,1,1,20,20,30"]
|===
4+|`OperatingDayRef`
| _→OperatingDayRefStructure_ |Reference to an Operating Day


|===


=== The complex type `OperatingDaysStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `OperatingDaysStructure`
2+|  [TMv6] day of public transport operation of which the characteristics are defined in a specific SERVICE CALENDAR and which may last more than 24 hours.

6+| The element contains a _sequence_ of the following elements:

|
2+| `From`
| *1:1* | _xs:date_ | Start date of period.

|
2+| `To`
| *1:1* | _xs:date_ | End date of period.

|
2+| `Pattern`
| *1:1* | _ValidDayBitType_ | Bit pattern for operating days between start date and end date. The length of the pattern is equal to the number of days from start date to end date. A bit value of "1" indicates that an event actually happens on the day that is represented by the bit position.

|===

=== The `OperatingDaysGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `OperatingDaysGroup`
2+| Coded as bit pattern

6+| The element contains a _sequence_ of the following elements:

|
2+| `OperatingDays`
| 0:1 | _OperatingDaysStructure_ | Bit string definition of operating days.

|
2+| `OperatingDaysDescription`
| 0:1 | _InternationalTextStructure_ | Textual description of the operation days, e.g. "monday to friday" or "not on holidays".

|===


=== The complex type `WeekdayTimePeriodStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `WeekdayTimePeriodStructure`
2+| [a specialisation of TIME BAND in TMv6] aggregation of TIME BAND and DAY OF WEEK (Time period on a weekday).

6+| The element contains a _sequence_ of the following elements:

|
2+| `Weekday`
| 0:* | _WeekdayTypeEnumeration_ | [a specialisation of DAY OF WEEK in TMv6] enumeration of individual the seven DAYs OF WEEK, along with public holidays

|
2+| `StartTime`
| *1:1* | _xs:time_ | Start time of period.

|
2+| `Duration`
| *1:1* | _xs:duration_ | Time duration of period.

|===


=== The complex type `GeneralAttributeStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `GeneralAttributeStructure`
2+| Structured attribute classification with associated text. If URL is given, it refers to the whole attribute text.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Text`
| *1:1* | _InternationalTextStructure_ | Text of the attribute to be shown to the user.

|
2+| `Code`
| *1:1* | _xs:NMTOKEN_ | Internal code of the attribute. Can be used for detection of double occurrences.

|
2+| →`AllFacilitiesGroup`
| *1:1* |  | 

|
2+| `Mandatory`
| 0:1 | _xs:boolean_ | Defines whether the attribute has to be shown to the user.

|
2+| `Importance`
| 0:1 | _PercentType_ | Importance of the attribute.

|
2+| →`WebLinkGroup`
| 0:1 |  | 

|===

== OJP/OJP_FacilitySupport.xsd - Supporting definitions for facilities containing wrappers for SIRI

=== The `AllFacilitiesGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `AllFacilitiesGroup`
2+| Wrapper for SIRI facilities.



The element contains only one element:

|
2+| →`siri:AllFacilitiesGroup`
| *1:1* |  | 

|===

=== The `StopFacilityGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `StopFacilityGroup`
2+| Wrapper for SIRI stop facilities.



The element contains only one element:

|
2+| →`siri:StopFacilityGroup`
| *1:1* |  | 

|===

=== The `ServiceFacilityGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ServiceFacilityGroup`
2+| Wrapper for SIRI service facilities.



The element contains only one element:

|
2+| →`siri:ServiceFacilityGroup`
| *1:1* |  | 

|===

== OJP/OJP_ModesSupport.xsd - Supporting definitions for the classification of modes of transport

=== Simple type definitions

|===
| `ContinuousModesEnumeration`| _xs:string_ | Types of cmodes that  run at any time without a timetable.
| `IndividualModesEnumeration`| _xs:string_ | modes which an individual powers themselves (such as walk, cycle)
| `PrivateModesEnumeration`| _xs:string_ | [a category of MODE in TMv6] MODEs offered by private individuals 
| `TransferModesEnumeration`| _xs:string_ | MODEs dedicated to peform TRANSFERs
|===

=== The complex type `IndividualTransportOptionsStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `IndividualTransportOptionsStructure`
2+| Individual modes and their usage limits as stated by the passenger

6+| The element contains a _sequence_ of the following elements:

|
2+| `Mode`
| *1:1* | _IndividualModesEnumeration_ | Mode of individual transport.	When mode self-drive-car is used the connection to another mode will need a parking space for the car. Thus, this mode is a generalisation of all park and ride use cases. The mode others-drive-car, however, only needs a place to let a person be set down from a car.

|
2+| `MaxDistance`
| 0:1 | _siri:DistanceType_ | Maximum distance in meters. If given, it restricts the maximum distance of routes with the given mode.

|
2+| `MaxDuration`
| 0:1 | _xs:duration_ | Maximum duration. If given, it restricts the maximum time of routes with the given mode.

|
2+| `MinDistance`
| 0:1 | _siri:DistanceType_ | Minimum distance in meters. If given, it restricts the minimum distance of routes with the given mode.

|
2+| `MinDuration`
| 0:1 | _xs:duration_ | Minimum duration. If given, it restricts the minimum time of routes with the given mode.

|
2+| `Speed`
| 0:1 | _OpenPercentType_ | Relative speed in percent. If given slows the standard speed (below 100) or fasten it (above 100).

|
2+| `AdditionalTime`
| 0:1 | _xs:duration_ | Additional time added to the actual traveling time needed to use a specific mode.

|===


=== The complex type `ModeStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `ModeStructure`
2+| [a specialisation of MODE in TMv6] an extended range of VEHICLE MODEs, aggregating them with some SUBMODEs

6+| The element contains a _sequence_ of the following elements:

|
2+| →`ModeGroup`
| *1:1* |  | 

|
2+| `Name`
| 0:1 | _InternationalTextStructure_ | Name of the mode.

|
2+| `ShortName`
| 0:1 | _InternationalTextStructure_ | Short name or acronym of the mode.

|
2+| `Description`
| 0:1 | _InternationalTextStructure_ | Additional text that further describes the mode.

|===

=== The `ModeGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `ModeGroup`
2+| Elements for a Transport Mode

6+| The element contains a _sequence_ of the following elements:

|
2+| `PtMode`
| *1:1* | _siri:VehicleModesOfTransportEnumeration_ | Categorisation of mode 

|
2+| →`siri:PtModeChoiceGroup`
| 0:1 |  | 

|===


=== The complex type `PtModeFilterStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PtModeFilterStructure`
2+| List of public transport modes ([from SIRI] mode of public transport service, corresponds to VEHICLE MODE) to include or exclude.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Exclude`
| 0:1 | _xs:boolean_ | Whether modes in list are to include or exclude from search. Default is exclude.

|
2+| `PtMode`
| 0:* | _siri:VehicleModesOfTransportEnumeration_ | List of PT Transport modes to include/exclude.

|
2+| →`siri:PtModeChoiceGroup`
| 0:* |  | 

|===


=== The complex type `PrivateModeFilterStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `PrivateModeFilterStructure`
2+| List of private mobility offers to include or exclude.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Exclude`
| 0:1 | _xs:boolean_ | Whether modes in list are to include or exclude from search. Default is exclude.

|
2+| `PrivateMode`
| 0:* | _PrivateModesEnumeration_ | List of private mobility offers to include/exclude.

|===

== OJP/OJP_Utility.xsd - Support definitions not specifically related to the public transport domain

=== Simple type definitions

|===
| `LengthType`| _xs:nonNegativeInteger_ | Data type for lengths, in meters.
| `OpenPercentType`| _xs:nonNegativeInteger_ | Percent value as integer, no upper limit.
| `PercentType`| _xs:nonNegativeInteger_ | Percent value as integer, limited to max value 100.
| `PhoneNumberType`| _xs:normalizedString_ | Type definition for phone numbers
| `PriorityType`| _xs:nonNegativeInteger_ | Data type for priority values, from 1 (highest) to 5 (lowest).
| `ValidDayBitType`| _xs:string_ | sequence of bits (values 0 or 1) coded as a text string and representing days
|===

=== The complex type `InternationalTextStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `InternationalTextStructure`
2+| [a restricted view of ALTERNATIVE NAME in TMv6] alternative identified text to be used in specified languages.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Text`
| *1:** | _siri:NaturalLanguageStringStructure_ | Text content.

|
2+| `TextId`
| 0:1 | _xs:NMTOKEN_ | Id of this text. May be used for matching to pre-recorded audio files.

|===

=== The `WebLinkGroup` group

[cols="1,1,1,20,20,30"]
|===
4+| `WebLinkGroup`
2+| URL of a web resource including type of resource.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Url`
| *1:1* | _xs:anyURI_ | URL to resource on web.

|
2+| `MimeType`
| 0:1 | _xs:normalizedString_ | MIME type of the referenced resource. To which kind of resource does the URL point to?

|
2+| `Embeddable`
| 0:1 | _xs:boolean_ | Is the referenced resource meant to be embedded as a webview in a surrounding context, e.g. app or web page? If yes, the resource has to be fully responsive. Default is false.

|===


=== The complex type `WebLinkStructure`

[cols="1,1,1,20,20,30"]
|===
4+| `WebLinkStructure`
2+| URL of a web resource with label.

6+| The element contains a _sequence_ of the following elements:

|
2+| `Label`
| *1:1* | _InternationalTextStructure_ | Label for link description.

|
2+| →`WebLinkGroup`
| *1:1* |  | 

|===

